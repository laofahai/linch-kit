# ç»§ç»­ Starter åº”ç”¨å¼€å‘ - æ•°æ®åº“é›†æˆé˜¶æ®µ

## ğŸ“‹ å½“å‰çŠ¶æ€æ¦‚è§ˆ

### âœ… å·²å®Œæˆçš„åŠŸèƒ½ (2025-06-20)

1. **tRPC é›†æˆå®Œæˆ**
   - tRPC Provider å’Œå®¢æˆ·ç«¯é…ç½®
   - API è·¯ç”± `/api/trpc/[trpc]/route.ts`
   - è®¤è¯å’Œæƒé™ä¸­é—´ä»¶
   - å®Œæ•´çš„ Context ç³»ç»Ÿ

2. **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**
   - ç™»å½•é¡µé¢ `/auth/login`
   - æ³¨å†Œé¡µé¢ `/auth/register`
   - Auth Router å’Œ API ç«¯ç‚¹
   - Token å­˜å‚¨å’Œä¼šè¯ç®¡ç†

3. **ç”¨æˆ·ç®¡ç†ç•Œé¢**
   - ç”¨æˆ·åˆ—è¡¨é¡µé¢ `/users`
   - CRUD æ“ä½œ (åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤)
   - åˆ†é¡µã€æœç´¢ã€è¿‡æ»¤åŠŸèƒ½
   - å“åº”å¼ UI è®¾è®¡

4. **å¼€å‘ç¯å¢ƒ**
   - å¼€å‘æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:3000
   - æ‰€æœ‰ä¾èµ–å·²å®‰è£…
   - TypeScript é…ç½®å®Œæˆ

### ğŸ¯ Demo è´¦æˆ·
- **ç®¡ç†å‘˜**: admin@example.com / admin123
- **æ™®é€šç”¨æˆ·**: user@example.com / user123

## ğŸš€ ä¸‹ä¸€é˜¶æ®µä»»åŠ¡ï¼šæ•°æ®åº“é›†æˆ

### ä¼˜å…ˆçº§ 1: Prisma æ•°æ®åº“é›†æˆ

1. **é…ç½®æ•°æ®åº“è¿æ¥**
   ```bash
   # æ£€æŸ¥å½“å‰é…ç½®
   cat apps/linch-starter/linch.config.ts
   
   # ç”Ÿæˆ Prisma schema
   cd apps/linch-starter
   pnpm linch schema:generate:prisma
   ```

2. **æ•°æ®åº“è¿ç§»**
   ```bash
   # åˆå§‹åŒ– Prisma
   npx prisma init
   
   # ç”Ÿæˆè¿ç§»
   npx prisma migrate dev --name init
   
   # ç”Ÿæˆ Prisma Client
   npx prisma generate
   ```

3. **æ›¿æ¢ Mock æ•°æ®**
   - æ›´æ–° `src/server/trpc/routers/user.ts` ä½¿ç”¨ Prisma
   - æ›´æ–° `src/server/trpc/routers/auth.ts` ä½¿ç”¨æ•°æ®åº“
   - å®ç°çœŸå®çš„å¯†ç å“ˆå¸Œå’ŒéªŒè¯

### ä¼˜å…ˆçº§ 2: è®¤è¯ç³»ç»Ÿå¢å¼º

1. **JWT è®¤è¯å®ç°**
   - é›†æˆ @linch-kit/auth-core åŒ…
   - å®ç°çœŸå®çš„ JWT token ç”Ÿæˆå’ŒéªŒè¯
   - æ›´æ–° tRPC context ä»¥åŒ…å«çœŸå®ç”¨æˆ·ä¿¡æ¯

2. **ä¼šè¯ç®¡ç†**
   - å®ç° httpOnly cookies å­˜å‚¨
   - æ·»åŠ  token åˆ·æ–°æœºåˆ¶
   - å®ç°è‡ªåŠ¨ç™»å‡ºåŠŸèƒ½

3. **æƒé™ç³»ç»Ÿ**
   - é›†æˆ @linch-kit/auth-core æƒé™æ£€æŸ¥
   - å®ç°åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
   - æ·»åŠ æƒé™ä¿æŠ¤çš„è·¯ç”±

### ä¼˜å…ˆçº§ 3: åŠŸèƒ½æ‰©å±•

1. **äº§å“ç®¡ç†åŠŸèƒ½**
   - åˆ›å»ºäº§å“ç®¡ç†é¡µé¢
   - å®ç°äº§å“ CRUD æ“ä½œ
   - é›†æˆç°æœ‰çš„ Product å®ä½“

2. **ä»ªè¡¨æ¿é¡µé¢**
   - åˆ›å»ºç®¡ç†ä»ªè¡¨æ¿
   - æ·»åŠ ç»Ÿè®¡æ•°æ®å±•ç¤º
   - å®ç°ç”¨æˆ·æ´»åŠ¨ç›‘æ§

3. **æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½**
   - å®ç°å¤´åƒä¸Šä¼ 
   - æ·»åŠ æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ
   - é›†æˆäº‘å­˜å‚¨æœåŠ¡

## ğŸ”§ å¼€å‘æŒ‡å—

### å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
cd /home/laofahai/workspace/linch-kit/apps/linch-starter

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
export PATH="/home/laofahai/.nvm/versions/node/v20.19.2/bin:$PATH"
pnpm dev
```

### æ£€æŸ¥å½“å‰çŠ¶æ€
```bash
# æ£€æŸ¥ CLI åŠŸèƒ½
pnpm linch --help
pnpm linch schema:list

# æ£€æŸ¥å®ä½“åŠ è½½
pnpm linch schema:show User
```

### å…³é”®æ–‡ä»¶ä½ç½®

#### tRPC ç›¸å…³
- `src/lib/trpc-provider.tsx` - tRPC å®¢æˆ·ç«¯é…ç½®
- `src/server/trpc/router.ts` - ä¸»è·¯ç”±
- `src/server/trpc/routers/user.ts` - ç”¨æˆ· API
- `src/server/trpc/routers/auth.ts` - è®¤è¯ API
- `src/app/api/trpc/[trpc]/route.ts` - API è·¯ç”±å¤„ç†

#### é¡µé¢ç»„ä»¶
- `src/app/users/page.tsx` - ç”¨æˆ·ç®¡ç†é¡µé¢
- `src/app/auth/login/page.tsx` - ç™»å½•é¡µé¢
- `src/app/auth/register/page.tsx` - æ³¨å†Œé¡µé¢

#### é…ç½®æ–‡ä»¶
- `linch.config.ts` - Linch Kit é…ç½®
- `src/entities/User.ts` - ç”¨æˆ·å®ä½“å®šä¹‰

## ğŸ¯ æˆåŠŸæ ‡å‡†

### æ•°æ®åº“é›†æˆå®Œæˆæ ‡å‡†
- [ ] Prisma schema ç”ŸæˆæˆåŠŸ
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] ç”¨æˆ·æ³¨å†Œ/ç™»å½•ä½¿ç”¨çœŸå®æ•°æ®åº“
- [ ] ç”¨æˆ·ç®¡ç† CRUD æ“ä½œæ­£å¸¸
- [ ] å¯†ç æ­£ç¡®å“ˆå¸Œå’ŒéªŒè¯

### è®¤è¯ç³»ç»Ÿå®Œæˆæ ‡å‡†
- [ ] JWT token æ­£ç¡®ç”Ÿæˆå’ŒéªŒè¯
- [ ] ä¼šè¯æŒä¹…åŒ–æ­£å¸¸å·¥ä½œ
- [ ] æƒé™æ£€æŸ¥ä¸­é—´ä»¶ç”Ÿæ•ˆ
- [ ] è‡ªåŠ¨ç™»å‡ºåŠŸèƒ½æ­£å¸¸

### åŠŸèƒ½æ‰©å±•å®Œæˆæ ‡å‡†
- [ ] äº§å“ç®¡ç†åŠŸèƒ½å®Œæ•´
- [ ] ä»ªè¡¨æ¿æ•°æ®å±•ç¤ºæ­£ç¡®
- [ ] æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æ­£å¸¸

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [å½“å‰è¿›åº¦](../ai-context/zh/management/current-progress.md)
- [Auth Core åŒ…æ–‡æ¡£](../ai-context/zh/packages/auth-core.md)
- [Schema åŒ…æ–‡æ¡£](../ai-context/zh/packages/schema.md)
- [tRPC åŒ…æ–‡æ¡£](../packages/trpc/README.md)

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**: ç¡®ä¿æ•°æ®åº“ URL æ­£ç¡®é…ç½®
2. **ä¾èµ–ç‰ˆæœ¬**: ä¿æŒæ‰€æœ‰åŒ…ç‰ˆæœ¬å…¼å®¹
3. **ç±»å‹å®‰å…¨**: ç»´æŠ¤ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨
4. **é”™è¯¯å¤„ç†**: å®Œå–„é”™è¯¯æç¤ºå’Œç”¨æˆ·ä½“éªŒ
5. **å®‰å…¨æ€§**: å®ç°æ­£ç¡®çš„å¯†ç å“ˆå¸Œå’Œ JWT éªŒè¯

---

**å¼€å§‹å‘½ä»¤**: è¯·æŒ‰ç…§ä¸Šè¿°ä¼˜å…ˆçº§é¡ºåºï¼Œä» Prisma æ•°æ®åº“é›†æˆå¼€å§‹ç»§ç»­å¼€å‘ã€‚
