# Linch Kit é—®é¢˜è§£å†³æç¤ºè¯

## ç›®çš„

æŒ‡å¯¼ AI åŠ©æ‰‹ç³»ç»Ÿæ€§åœ°è¯Šæ–­å’Œè§£å†³ Linch Kit é¡¹ç›®ä¸­é‡åˆ°çš„å„ç§æŠ€æœ¯é—®é¢˜ï¼Œç¡®ä¿é—®é¢˜è§£å†³çš„æ•ˆç‡å’Œè´¨é‡ã€‚

## ä¸Šä¸‹æ–‡

**å‚è€ƒæ–‡æ¡£**: 
- `ai-context/zh/reference/troubleshooting.md`
- `ai-context/zh/management/handover-guide.md`
- `ai-context/zh/management/current-progress.md`

Linch Kit é¡¹ç›®é‡‡ç”¨å¤æ‚çš„ Monorepo æ¶æ„ï¼ŒåŒ…å«å¤šä¸ªç›¸äº’ä¾èµ–çš„åŒ…ï¼Œéœ€è¦ç³»ç»Ÿæ€§çš„é—®é¢˜è¯Šæ–­æ–¹æ³•ã€‚

## é—®é¢˜è¯Šæ–­æµç¨‹

### 1. é—®é¢˜åˆ†ç±»è¯†åˆ«

#### CLI ç›¸å…³é—®é¢˜ ğŸ”¥ **å½“å‰æœ€é«˜ä¼˜å…ˆçº§**
**ç—‡çŠ¶**: 
- `linch plugin-list` æ˜¾ç¤º "Unknown command"
- CLI å‘½ä»¤æ— æ³•æ­£å¸¸å·¥ä½œ
- æ’ä»¶åŠ è½½å¤±è´¥

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥åŸºç¡€ CLI åŠŸèƒ½
cd /home/laofahai/workspace/linch-kit/apps/starter
pnpm linch --help

# 2. æ£€æŸ¥å·¥ä½œç›®å½•
pwd  # åº”è¯¥åœ¨æ­£ç¡®çš„é¡¹ç›®ç›®å½•

# 3. æ£€æŸ¥å…³é”®æ–‡ä»¶
ls -la scripts/linch.js
ls -la linch.config.ts
```

**å‚è€ƒ**: `ai-context/zh/reference/troubleshooting.md#cli-é—®é¢˜`

#### æ„å»ºç›¸å…³é—®é¢˜
**ç—‡çŠ¶**:
- `pnpm build` å¤±è´¥
- TypeScript ç¼–è¯‘é”™è¯¯
- åŒ…ä¾èµ–é—®é¢˜

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. æ¸…ç†æ„å»ºç¼“å­˜
pnpm clean

# 2. é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules
pnpm install

# 3. æ£€æŸ¥ TypeScript é”™è¯¯
pnpm type-check

# 4. é€ä¸ªåŒ…æ„å»º
cd packages/core && pnpm build
```

#### Schema ç›¸å…³é—®é¢˜
**ç—‡çŠ¶**:
- Schema å‘½ä»¤æ— æ³•æ‰¾åˆ°å®ä½“
- Prisma ç”Ÿæˆå¤±è´¥
- ç±»å‹å®šä¹‰é”™è¯¯

**è¯Šæ–­æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥å®ä½“æ–‡ä»¶
ls -la apps/starter/app/_lib/schemas/

# 2. éªŒè¯é…ç½®
cat apps/starter/linch.config.ts

# 3. æµ‹è¯• Schema å‘½ä»¤
pnpm linch schema-list
```

### 2. ç³»ç»Ÿæ€§è¯Šæ–­æ–¹æ³•

#### æ­¥éª¤ 1: ç¯å¢ƒéªŒè¯
```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version  # åº”è¯¥æ˜¯ 20+

# æ£€æŸ¥ pnpm ç‰ˆæœ¬
pnpm --version

# æ£€æŸ¥å·¥ä½œç›®å½•
pwd  # åº”è¯¥åœ¨é¡¹ç›®æ ¹ç›®å½•

# æ£€æŸ¥ Git çŠ¶æ€
git status
```

#### æ­¥éª¤ 2: ä¾èµ–æ£€æŸ¥
```bash
# æ£€æŸ¥ä¾èµ–æ ‘
pnpm list

# æ£€æŸ¥è¿‡æœŸä¾èµ–
pnpm outdated

# æ£€æŸ¥å®‰å…¨é—®é¢˜
pnpm audit
```

#### æ­¥éª¤ 3: é…ç½®éªŒè¯
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat linch.config.ts
cat package.json
cat turbo.json

# æ£€æŸ¥ç¯å¢ƒå˜é‡
cat .env.local
```

#### æ­¥éª¤ 4: æ„å»ºéªŒè¯
```bash
# æ¸…ç†å¹¶é‡æ–°æ„å»º
pnpm clean
pnpm install
pnpm build

# æ£€æŸ¥æ„å»ºè¾“å‡º
ls -la packages/*/dist/
```

## å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ

### 1. CLI æ’ä»¶åŠ è½½é—®é¢˜ ğŸ”¥ **å½“å‰é‡ç‚¹**

**é—®é¢˜**: `linch plugin-list` å‘½ä»¤æ˜¾ç¤º "Unknown command"

**è§£å†³æ­¥éª¤**:
1. **æ£€æŸ¥æ’ä»¶å‘ç°æœºåˆ¶**
   ```typescript
   // æ£€æŸ¥æ–‡ä»¶: packages/core/src/cli/core/plugin-loader.ts
   // ç¡®è®¤æ’ä»¶å‘ç°é€»è¾‘æ˜¯å¦æ­£ç¡®
   ```

2. **éªŒè¯å‘½ä»¤æ³¨å†Œ**
   ```typescript
   // æ£€æŸ¥æ–‡ä»¶: packages/core/src/cli/core/command-registry.ts
   // ç¡®è®¤å‘½ä»¤æ³¨å†Œæœºåˆ¶æ˜¯å¦æ­£å¸¸
   ```

3. **æ£€æŸ¥ Schema æ’ä»¶**
   ```typescript
   // æ£€æŸ¥æ–‡ä»¶: packages/schema/src/plugins/cli-plugin.ts
   // ç¡®è®¤æ’ä»¶å¯¼å‡ºå’Œæ³¨å†Œæ˜¯å¦æ­£ç¡®
   ```

4. **éªŒè¯é…ç½®åŠ è½½**
   ```typescript
   // ç¡®è®¤ apps/starter/linch.config.ts é…ç½®æ­£ç¡®
   // æ£€æŸ¥é…ç½®æ–‡ä»¶è·¯å¾„å’Œæ ¼å¼
   ```

### 2. é…ç½®æ–‡ä»¶ç»Ÿä¸€é—®é¢˜

**é—®é¢˜**: Schema CLI æ’ä»¶éœ€è¦ä» `linch.config.ts` è¯»å–é…ç½®

**è§£å†³æ­¥éª¤**:
1. **ä¿®æ”¹é…ç½®åŠ è½½é€»è¾‘**
   ```typescript
   // åœ¨ packages/schema/src/plugins/cli-plugin.ts ä¸­
   // ä¿®æ”¹é…ç½®åŠ è½½ï¼Œä½¿ç”¨ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶
   ```

2. **éªŒè¯é…ç½®ç»“æ„**
   ```typescript
   // ç¡®ä¿ apps/starter/linch.config.ts åŒ…å« schema é…ç½®
   export default defineConfig({
     schema: {
       schemaDir: './app/_lib/schemas',
       outputDir: './generated'
     }
   })
   ```

### 3. åŒ…ä¾èµ–å†²çªè§£å†³

**é—®é¢˜**: ä¸åŒåŒ…ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ä¾èµ–

**è§£å†³æ­¥éª¤**:
1. **æ£€æŸ¥æ ¹ç›®å½• package.json**
2. **ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬**
3. **ä½¿ç”¨ `pnpm update`**
4. **é‡æ–°æ„å»ºæ‰€æœ‰åŒ…**

### 4. ç±»å‹é”™è¯¯è§£å†³

**é—®é¢˜**: TypeScript ç±»å‹æ£€æŸ¥å¤±è´¥

**è§£å†³æ­¥éª¤**:
1. **æ£€æŸ¥ç±»å‹å®šä¹‰**: `packages/types/`
2. **éªŒè¯åŒ…ä¾èµ–ç‰ˆæœ¬**
3. **æ›´æ–°ç±»å‹å®šä¹‰**
4. **é‡æ–°æ„å»ºç±»å‹åŒ…**

## è°ƒè¯•æŠ€å·§

### 1. æ—¥å¿—è°ƒè¯•
```bash
# CLI è°ƒè¯•æ¨¡å¼
DEBUG=linch:* pnpm linch command

# æŸ¥çœ‹è¯¦ç»†æ„å»ºæ—¥å¿—
pnpm build --verbose

# æŸ¥çœ‹è¯¦ç»†æµ‹è¯•æ—¥å¿—
pnpm test --verbose
```

### 2. æ–‡ä»¶æ£€æŸ¥
```bash
# æ£€æŸ¥å…³é”®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la apps/starter/linch.config.ts
ls -la packages/core/src/cli/
ls -la packages/schema/src/plugins/

# æ£€æŸ¥æ„å»ºè¾“å‡º
ls -la packages/*/dist/
```

### 3. è¿›ç¨‹è°ƒè¯•
```bash
# æ£€æŸ¥è¿è¡Œä¸­çš„è¿›ç¨‹
ps aux | grep node

# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :3000
```

## é—®é¢˜è§£å†³æ£€æŸ¥æ¸…å•

### è§£å†³å‰æ£€æŸ¥
- [ ] ç¡®è®¤é—®é¢˜çš„å…·ä½“ç—‡çŠ¶
- [ ] æŸ¥çœ‹ç›¸å…³é”™è¯¯æ—¥å¿—
- [ ] æ£€æŸ¥æœ€è¿‘çš„ä»£ç å˜æ›´
- [ ] éªŒè¯ç¯å¢ƒé…ç½®

### è§£å†³è¿‡ç¨‹
- [ ] æŒ‰ç…§ç³»ç»Ÿæ€§è¯Šæ–­æµç¨‹æ‰§è¡Œ
- [ ] è®°å½•æ¯ä¸ªæ­¥éª¤çš„ç»“æœ
- [ ] æµ‹è¯•è§£å†³æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§
- [ ] éªŒè¯æ²¡æœ‰å¼•å…¥æ–°é—®é¢˜

### è§£å†³åéªŒè¯
- [ ] åŠŸèƒ½å®Œå…¨æ¢å¤æ­£å¸¸
- [ ] ç›¸å…³æµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] é¢„é˜²æªæ–½å·²å®æ–½

## é¢„é˜²æªæ–½

### 1. å®šæœŸç»´æŠ¤
- å®šæœŸæ›´æ–°ä¾èµ–
- å®šæœŸè¿è¡Œå®‰å…¨å®¡è®¡
- å®šæœŸæ¸…ç†æ„å»ºç¼“å­˜
- å®šæœŸå¤‡ä»½é‡è¦é…ç½®

### 2. ç›‘æ§æŒ‡æ ‡
- æ„å»ºæˆåŠŸç‡
- æµ‹è¯•é€šè¿‡ç‡
- ä¾èµ–å®‰å…¨çŠ¶æ€
- æ€§èƒ½æŒ‡æ ‡

### 3. æ–‡æ¡£ç»´æŠ¤
- åŠæ—¶æ›´æ–°æ•…éšœæ’é™¤æŒ‡å—
- è®°å½•æ–°å‘ç°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ
- ç»´æŠ¤å¸¸è§é—®é¢˜ FAQ
- æ›´æ–°æœ€ä½³å®è·µæ–‡æ¡£

---

**ä½¿ç”¨è¯´æ˜**:
1. é‡åˆ°é—®é¢˜æ—¶é¦–å…ˆè¿›è¡Œé—®é¢˜åˆ†ç±»
2. æŒ‰ç…§ç³»ç»Ÿæ€§è¯Šæ–­æµç¨‹æ‰§è¡Œ
3. è®°å½•é—®é¢˜è§£å†³è¿‡ç¨‹
4. æ›´æ–°æ•…éšœæ’é™¤æ–‡æ¡£

**ç›¸å…³æ–‡æ¡£**:
- [æ•…éšœæ’é™¤æŒ‡å—](../../ai-context/zh/reference/troubleshooting.md)
- [å·¥ä½œäº¤æ¥æŒ‡å—](../../ai-context/zh/management/handover-guide.md)
- [å½“å‰è¿›åº¦](../../ai-context/zh/management/current-progress.md)
