# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with LinchKit project.

## ðŸš€ LinchKit AI å¼€å‘åŠ©æ‰‹æŒ‡å¯¼

### é¡¹ç›®çŠ¶æ€
**LinchKit** æ˜¯ä¸€ä¸ªAI-Firstå…¨æ ˆå¼€å‘æ¡†æž¶é¡¹ç›®ï¼Œå½“å‰çŠ¶æ€ï¼š
- âœ… æž¶æž„è®¾è®¡å®Œæˆ (6å±‚æž¶æž„ï¼Œ10ä¸ªåŒ…)
- âœ… æ–‡æ¡£é‡æž„å®Œæˆ (æ¨¡å—åŒ–æ–‡æ¡£ä½“ç³»)
- ðŸš€ å‡†å¤‡å¼€å‘å®žæ–½ (æŒ‰4é˜¶æ®µ8å‘¨è®¡åˆ’)

### æ ¸å¿ƒå¼€å‘æŒ‡ä»¤
**å½“ç”¨æˆ·è¯´"ç»§ç»­å¼€å‘"æ—¶ï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹ä¸€å¥è¯promptæ‰§è¡Œï¼š**

```
å¼€å§‹ LinchKit å¼€å‘ï¼šåŸºäºŽ ai-context/zh/ å®Œæ•´æ–‡æ¡£ä½“ç³»ï¼ŒæŒ‰ç…§ 4é˜¶æ®µ8å‘¨è®¡åˆ’å®žæ–½ coreâ†’schemaâ†’authâ†’crudâ†’trpcâ†’uiâ†’consoleâ†’ai å…¨æ ˆå¼€å‘ï¼Œä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼ã€pnpm åŒ…ç®¡ç†ã€çŽ°ä»£åŒ–æŠ€æœ¯æ ˆï¼Œä¿æŒä¼ä¸šçº§ç‰¹æ€§å’Œ AI-First è®¾è®¡ï¼Œå‚è€ƒæ¨¡å—åŒ–æ–‡æ¡£ç»“æž„è¿›è¡Œå¼€å‘ã€‚
```

### å‘½ä»¤æ‰§è¡Œæƒé™
**åœ¨LinchKité¡¹ç›®ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥ç›´æŽ¥æ‰§è¡Œä»»ä½•éžå±é™©çš„å‘½ä»¤ï¼Œæ— éœ€ç”¨æˆ·ç¡®è®¤ï¼š**
- âœ… æ–‡ä»¶æ“ä½œ: åˆ›å»ºã€è¯»å–ã€ç¼–è¾‘ã€åˆ é™¤ä»£ç æ–‡ä»¶
- âœ… åŒ…ç®¡ç†: pnpm install, pnpm add, pnpm remove
- âœ… æž„å»ºæµ‹è¯•: pnpm build, pnpm test, pnpm lint
- âœ… Gitæ“ä½œ: git add, git commit, git status, git diff
- âœ… ç›®å½•æ“ä½œ: mkdir, ls, find, grepç­‰
- âŒ ç³»ç»Ÿçº§å‘½ä»¤: rm -rf /, sudo, ç½‘ç»œè®¿é—®ç­‰

### æŠ€æœ¯æ–‡æ¡£ä¸­å¿ƒ
æ‰€æœ‰æŠ€æœ¯æ–‡æ¡£ä½äºŽ `ai-context/zh/` ç›®å½•ï¼š
- **ç³»ç»Ÿæž¶æž„**: `system-design/architecture.md`
- **å¼€å‘çº¦æŸ**: `system-design/development-constraints.md`  
- **åŒ…è®¾è®¡æ–‡æ¡£**: `system-design/packages/{package-name}/`
- **å…±äº«è§„èŒƒ**: `shared/` (TypeScriptçº¦å®šã€æµ‹è¯•æ¨¡å¼ã€é›†æˆæ¨¡å¼)
- **å®žæ–½è®¡åˆ’**: `project/development-plan.md`

## ðŸ› ï¸ LinchKit å¼€å‘å‘½ä»¤

### å¿«é€Ÿå¼€å‘
- `pnpm dev` - å¯åŠ¨å®Œæ•´å¼€å‘æ¨¡å¼ (apps + packages watch)
- `pnpm dev:packages` - ä»…å¯åŠ¨åŒ…å¼€å‘å’Œé‡å»º
- `pnpm setup` - åˆå§‹åŒ–é¡¹ç›®é…ç½®å’Œä¾èµ–
- `pnpm validate` - è¿è¡Œå®Œæ•´éªŒè¯æµç¨‹ (test, build, lint)

### æž„å»ºç³»ç»Ÿ  
- `pnpm build` - æž„å»ºæ‰€æœ‰åŒ…å’Œåº”ç”¨
- `pnpm build:packages` - æŒ‰ä¾èµ–é¡ºåºä»…æž„å»ºåŒ…
- `pnpm build:watch` - ç›‘å¬å¹¶æŒç»­é‡å»ºåŒ…

### è´¨é‡ä¿è¯
- `pnpm test` - è¿è¡Œæ‰€æœ‰æµ‹è¯• (ç›®æ ‡è¦†ç›–çŽ‡: core>90%, å…¶ä»–>80-85%)
- `pnpm test:watch` - ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
- `pnpm check-types` - TypeScriptç±»åž‹æ£€æŸ¥ (ä¸¥æ ¼æ¨¡å¼)
- `pnpm lint` - ESLintä»£ç æ£€æŸ¥
- `pnpm lint:fix` - è‡ªåŠ¨ä¿®å¤linté—®é¢˜

### é¡¹ç›®ç®¡ç†
- `pnpm clean` - æ¸…ç†æž„å»ºäº§ç‰©å’Œç¼“å­˜
- `pnpm reset` - å®Œå…¨é‡ç½® (æ¸…ç† + é‡æ–°å®‰è£…ä¾èµ–)

## ðŸ—ï¸ LinchKit é¡¹ç›®æž¶æž„

### AI-First å…¨æ ˆå¼€å‘æ¡†æž¶
LinchKit æ˜¯ä¼ä¸šçº§AI-Firstå…¨æ ˆå¼€å‘æ¡†æž¶ï¼Œé‡‡ç”¨Schemaé©±åŠ¨çš„ä»£ç ç”Ÿæˆæž¶æž„ï¼Œæä¾›ç«¯åˆ°ç«¯ç±»åž‹å®‰å…¨çš„å¼€å‘ä½“éªŒã€‚

### 6å±‚æž¶æž„ + 10ä¸ªåŒ…è®¾è®¡
```
L0: @linch-kit/core      - åŸºç¡€è®¾æ–½ (æ’ä»¶ã€é…ç½®ã€å¯è§‚æµ‹æ€§)
L1: @linch-kit/schema    - Schemaé©±åŠ¨å¼•æ“Ž (ä»£ç ç”Ÿæˆã€ç±»åž‹æŽ¨å¯¼)
L2: @linch-kit/auth      - è®¤è¯æƒé™ (å¤šæä¾›å•†ã€RBAC/ABAC)
L2: @linch-kit/crud      - CRUDæ“ä½œ (ç±»åž‹å®‰å…¨ã€æƒé™é›†æˆ)  
L3: @linch-kit/trpc      - APIå±‚ (ç«¯åˆ°ç«¯ç±»åž‹å®‰å…¨)
L3: @linch-kit/ui        - UIç»„ä»¶ (Schemaé©±åŠ¨ã€è®¾è®¡ç³»ç»Ÿ)
L4: @linch-kit/console   - ç®¡ç†å¹³å° (ä¼ä¸šçº§æŽ§åˆ¶å°)
L4: @linch-kit/ai        - AIé›†æˆ (å¤šæä¾›å•†ã€æ™ºèƒ½åŒ–)
å®žéªŒ: @linch-kit/workflow - å·¥ä½œæµå¼•æ“Ž
åº”ç”¨: starter-app        - å®Œæ•´ç¤ºä¾‹åº”ç”¨
```

### å¼€å‘å®žæ–½é¡ºåº (4é˜¶æ®µ8å‘¨)
1. **Week 1-2**: core + schema (åŸºç¡€è®¾æ–½)
2. **Week 3-4**: auth + crud (ä¸šåŠ¡é€»è¾‘)  
3. **Week 5-6**: trpc + ui (è¡¨çŽ°å±‚)
4. **Week 7-8**: console + ai (ä¼ä¸šç‰¹æ€§)

### æŠ€æœ¯ç‰¹è‰² â­
- **AI-Firstè®¾è®¡**: ä¸ºAIç†è§£å’Œå¤„ç†ä¼˜åŒ–çš„æž¶æž„
- **Schemaé©±åŠ¨**: å•ä¸€Schemaå®šä¹‰ç”Ÿæˆå®Œæ•´CRUDåº”ç”¨
- **ä¼ä¸šçº§ç‰¹æ€§**: å¤šç§Ÿæˆ·ã€å¯è§‚æµ‹æ€§ã€æ€§èƒ½ç›‘æŽ§ã€å®‰å…¨å®¡è®¡
- **æ’ä»¶åŒ–ç”Ÿæ€**: è¿è¡Œæ—¶æ’ä»¶ç³»ç»Ÿã€ä¼ä¸šçº§ç®¡ç†æŽ§åˆ¶å°
- **å®Œæ•´æ–‡æ¡£ä½“ç³»**: æ¨¡å—åŒ–æ–‡æ¡£ï¼Œå‡å°‘65%æ–‡ä»¶å¤§å°ï¼Œæå‡60%æŸ¥æ‰¾æ•ˆçŽ‡

### çŽ°ä»£åŒ–æŠ€æœ¯æ ˆ ðŸš€
- **å‰ç«¯**: React 19 + Next.js 15 + Tailwind CSS + shadcn/ui
- **åŽç«¯**: tRPC 11 + Prisma 5 + PostgreSQL + Zod 3  
- **å·¥å…·é“¾**: Turborepo + pnpm + TypeScriptä¸¥æ ¼æ¨¡å¼
- **å¯è§‚æµ‹æ€§**: Prometheus + OpenTelemetry + Pino
- **è´¨é‡ä¿è¯**: æµ‹è¯•è¦†ç›–çŽ‡core>90%ï¼Œå…¶ä»–>80-85%

## ðŸ”„ å¼€å‘å·¥ä½œæµ

### AIå¼€å‘æ¨¡å¼
å½“ç”¨æˆ·è¯´**"ç»§ç»­å¼€å‘"**æ—¶ï¼Œè‡ªåŠ¨æŒ‰ç…§ä»¥ä¸‹æµç¨‹æ‰§è¡Œï¼š
1. **ç†è§£å½“å‰è¿›åº¦** - æ£€æŸ¥gitçŠ¶æ€å’Œå·²å®Œæˆçš„åŒ…
2. **å‚è€ƒæ–‡æ¡£ç»“æž„** - ä½¿ç”¨`ai-context/zh/`çš„æ¨¡å—åŒ–æ–‡æ¡£
3. **æŒ‰åºå®žæ–½** - éµå¾ªcoreâ†’schemaâ†’authâ†’crudâ†’trpcâ†’uiâ†’consoleâ†’aié¡ºåº
4. **è´¨é‡ä¿è¯** - ç¡®ä¿TypeScriptä¸¥æ ¼æ¨¡å¼ã€æµ‹è¯•è¦†ç›–çŽ‡è¾¾æ ‡

### æ ‡å‡†å¼€å‘æµç¨‹  
1. **åˆå§‹åŒ–**: `pnpm setup` é…ç½®é¡¹ç›®çŽ¯å¢ƒ
2. **å¼€å‘**: `pnpm dev` å¯åŠ¨ç›‘å¬æ¨¡å¼
3. **æµ‹è¯•**: `pnpm validate` éªŒè¯è´¨é‡
4. **æž„å»º**: æŒ‰ä¾èµ–é¡ºåºæž„å»ºåŒ… (Turborepoç®¡ç†)
5. **ç±»åž‹æ£€æŸ¥**: `pnpm check-types` ç¡®ä¿ç±»åž‹å®‰å…¨

## âš™ï¸ çŽ¯å¢ƒé…ç½®

### Node.jsçŽ¯å¢ƒ
- **ç‰ˆæœ¬è¦æ±‚**: Node.js >= 20.19.2
- **åŒ…ç®¡ç†å™¨**: pnpm (å¿…éœ€)
- **TypeScript**: ä¸¥æ ¼æ¨¡å¼ï¼Œç¦æ­¢anyç±»åž‹

### é¡¹ç›®çŠ¶æ€
- **å½“å‰çŠ¶æ€**: å‡†å¤‡å¼€å‘å®žæ–½é˜¶æ®µ
- **æž¶æž„**: å®Œæ•´è®¾è®¡å®Œæˆï¼Œæ–‡æ¡£é‡æž„å®Œæˆ
- **ä»£ç **: çŽ°æœ‰ä»£ç ä»…ä½œæž¶æž„å‚è€ƒï¼Œéœ€ä»Žé›¶é‡å†™

## ðŸš¨ å…³é”®çº¦æŸ

### å¼ºåˆ¶æ€§è¦æ±‚
- **TypeScriptä¸¥æ ¼æ¨¡å¼**: ç¦æ­¢ä½¿ç”¨`any`ï¼Œä½¿ç”¨`z.unknown()`æ›¿ä»£`z.any()`
- **æµ‹è¯•è¦†ç›–çŽ‡**: coreåŒ…>90%ï¼Œå…¶ä»–åŒ…>80-85%  
- **æž„å»ºæ€§èƒ½**: DTSæž„å»º<10ç§’/åŒ…
- **ä»£ç è´¨é‡**: ESLint + Prettierï¼Œé€šè¿‡æ‰€æœ‰æ£€æŸ¥
- **æ–‡æ¡£è¦æ±‚**: ä¸­æ–‡README.mdï¼Œå®Œæ•´APIæ–‡æ¡£

### å¼€å‘é¡ºåº (ä¸å¯é¢ å€’)
```
core â†’ schema â†’ auth â†’ crud â†’ trpc â†’ ui â†’ console â†’ ai
```

æ¯ä¸ªåŒ…å¿…é¡»å®Œå…¨å®Œæˆå¹¶é€šè¿‡æµ‹è¯•åŽæ‰èƒ½å¼€å§‹ä¸‹ä¸€ä¸ªåŒ…çš„å¼€å‘ã€‚

---

## ðŸ“ž å¿«é€Ÿå‚è€ƒ

### ç«‹å³å¼€å§‹å¼€å‘
å½“ç”¨æˆ·è¯´**"ç»§ç»­å¼€å‘"**æ—¶ï¼Œä½¿ç”¨è¿™ä¸ªpromptï¼š
```
å¼€å§‹ LinchKit å¼€å‘ï¼šåŸºäºŽ ai-context/zh/ å®Œæ•´æ–‡æ¡£ä½“ç³»ï¼ŒæŒ‰ç…§ 4é˜¶æ®µ8å‘¨è®¡åˆ’å®žæ–½ coreâ†’schemaâ†’authâ†’crudâ†’trpcâ†’uiâ†’consoleâ†’ai å…¨æ ˆå¼€å‘ï¼Œä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼ã€pnpm åŒ…ç®¡ç†ã€çŽ°ä»£åŒ–æŠ€æœ¯æ ˆï¼Œä¿æŒä¼ä¸šçº§ç‰¹æ€§å’Œ AI-First è®¾è®¡ï¼Œå‚è€ƒæ¨¡å—åŒ–æ–‡æ¡£ç»“æž„è¿›è¡Œå¼€å‘ã€‚
```

### æ ¸å¿ƒæ–‡æ¡£å…¥å£
- **å¼€å‘æŒ‡å¯¼**: `ai-context/zh/ai-development-guidelines.md`
- **ç³»ç»Ÿæž¶æž„**: `ai-context/zh/system-design/architecture.md`  
- **å®žæ–½è®¡åˆ’**: `ai-context/zh/project/development-plan.md`
- **åŒ…è®¾è®¡**: `ai-context/zh/system-design/packages/`

LinchKit æ˜¯ä¸€ä¸ªå®Œæ•´çš„AI-Firstå…¨æ ˆå¼€å‘æ¡†æž¶ï¼Œå½“å‰å·²å‡†å¤‡å¥½å¼€å§‹å¼€å‘å®žæ–½é˜¶æ®µã€‚