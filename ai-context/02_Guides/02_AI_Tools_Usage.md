# LinchKit AI å·¥å…·ä½¿ç”¨æŒ‡å—

**ç‰ˆæœ¬**: v2.0.3  
**æ›´æ–°**: 2025-07-07  
**çŠ¶æ€**: AI Session å·¥å…·å’Œ Graph RAG çš„ç»Ÿä¸€ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ¦‚è¿°

LinchKit æä¾›äº†å®Œæ•´çš„ AI å·¥å…·ç”Ÿæ€ï¼ŒåŒ…æ‹¬ï¼š

- **AI Session å·¥å…·**: `bun run ai:session` - è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹
- **Neo4j çŸ¥è¯†å›¾è°±**: 5,446+ èŠ‚ç‚¹çš„é¡¹ç›®çŸ¥è¯†å›¾è°±
- **Graph RAG æŸ¥è¯¢**: æ™ºèƒ½é¡¹ç›®ä¸Šä¸‹æ–‡æŸ¥è¯¢
- **æ™ºèƒ½åˆ†æ”¯ç®¡ç†**: åŸºäºä»»åŠ¡æè¿°è‡ªåŠ¨ç”Ÿæˆåˆ†æ”¯å

## ğŸš€ AI Session å·¥å…·

### âš¡ å¿«é€Ÿå¯åŠ¨

```bash
# è‡ªåŠ¨æ‰§è¡Œæ‰€æœ‰åˆå§‹åŒ–æ£€æŸ¥ï¼ˆåˆ†æ”¯ã€ç¯å¢ƒã€ä¾èµ–ï¼‰
bun run ai:session init "[ä»»åŠ¡æè¿°]"

# æˆ–è€…ç®€å•çš„ç¯å¢ƒæ£€æŸ¥
bun run ai:session init
```

### ğŸŒ³ æ™ºèƒ½åˆ†æ”¯åˆ›å»º

**Claude ä¼šæ ¹æ®ä»»åŠ¡æè¿°æ™ºèƒ½ç”Ÿæˆè‹±æ–‡åˆ†æ”¯å**:

```bash
# Claudeè°ƒç”¨æ–¹å¼ï¼ˆæ¨èï¼‰
bun run ai:session branch add-user-avatar "ç»™ç”¨æˆ·æ·»åŠ å¤´åƒåŠŸèƒ½"

# ç›´æ¥æŒ‡å®šåˆ†æ”¯å
bun run ai:session branch fix-login-bug "ä¿®å¤ç™»å½•é”™è¯¯"
```

**åˆ†æ”¯åè§„èŒƒ**:

- è‡ªåŠ¨æ·»åŠ  `feature/` å‰ç¼€
- åªå…è®¸å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦ã€ä¸‹åˆ’çº¿
- Claude ä¼šå°†ä¸­æ–‡ä»»åŠ¡æè¿°è½¬æ¢ä¸ºç®€æ´çš„è‹±æ–‡åˆ†æ”¯å

### ğŸ¯ ä¸Šä¸‹æ–‡æŸ¥è¯¢ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

**ä»»ä½•ä»£ç ç›¸å…³ä»»åŠ¡éƒ½å¿…é¡»å…ˆæŸ¥è¯¢é¡¹ç›®ä¸Šä¸‹æ–‡**:

```bash
# æŸ¥è¯¢å®ä½“å®šä¹‰å’Œç›¸å…³æ–‡ä»¶
bun run ai:session query "[å®ä½“å]"

# æŸ¥è¯¢ç¬¦å·å®šä¹‰ï¼ˆå‡½æ•°ã€ç±»ã€æ¥å£ï¼‰
bun run ai:session symbol "[ç¬¦å·å]"

# æŸ¥è¯¢å®ç°æ¨¡å¼
bun run ai:session pattern "[æ¨¡å¼]" "[å®ä½“]"
```

### ğŸ”„ å›¾è°±æ•°æ®åŒæ­¥ï¼ˆå¼ºåˆ¶æ‰§è¡Œï¼‰

```bash
# åŒæ­¥Neo4jå›¾è°±æ•°æ®
bun run ai:session sync

# å®Œæ•´éªŒè¯ï¼ˆåŒ…å«å›¾è°±åŒæ­¥ï¼‰
bun run ai:session validate
```

## ğŸ“Š Neo4j çŸ¥è¯†å›¾è°±

### å½“å‰çŠ¶æ€

- **èŠ‚ç‚¹æ•°é‡**: 5,446 ä¸ªä»£ç å®ä½“
- **å…³ç³»æ•°é‡**: 7,969 ä¸ªä¾èµ–å…³ç³»
- **å…³ç³»ç±»å‹**: `CALLS`, `EXTENDS`, `IMPLEMENTS`, `IMPORTS`
- **æ›´æ–°é¢‘ç‡**: æ¯æ¬¡ä»£ç å˜æ›´åè‡ªåŠ¨åŒæ­¥

### å›¾è°± Schema

```
èŠ‚ç‚¹ç±»å‹:
- Package (åŒ…)
- Function (å‡½æ•°)
- Class (ç±»)
- Interface (æ¥å£)
- Schema (æ•°æ®æ¨¡å‹)

å…³ç³»ç±»å‹:
- CALLS (è°ƒç”¨å…³ç³»)
- EXTENDS (ç»§æ‰¿å…³ç³»)
- IMPLEMENTS (å®ç°å…³ç³»)
- IMPORTS (å¯¼å…¥å…³ç³»)
- DEPENDS_ON (ä¾èµ–å…³ç³»)
```

## ğŸ§  Graph RAG æŸ¥è¯¢

### æŸ¥è¯¢å¼•æ“çŠ¶æ€

- **åŸºç¡€æŸ¥è¯¢**: âœ… å·²å®Œæˆ - å®ä½“æŸ¥æ‰¾ã€å…³ç³»æŸ¥è¯¢
- **æ„å›¾è¯†åˆ«**: âœ… å·²ä¼˜åŒ– - ä¸­æ–‡è‡ªç„¶è¯­è¨€æŸ¥è¯¢è¯†åˆ«
- **æ€§èƒ½**: å¹³å‡æŸ¥è¯¢æ—¶é—´ 1.4-2.3 ç§’
- **å‡†ç¡®ç‡**: ç»“æ„æŸ¥è¯¢ 90%+ï¼Œä½¿ç”¨å…³ç³»æŸ¥è¯¢å¾…å¢å¼º

### ä½¿ç”¨æ–¹å¼

#### 1. é€šè¿‡ AI Session å·¥å…·

```bash
# æŸ¥æ‰¾å®ä½“å’Œç›¸å…³æ–‡ä»¶
bun run ai:session query "User"
bun run ai:session query "Product"

# æŸ¥æ‰¾ç¬¦å·å®šä¹‰
bun run ai:session symbol "UserSchema"
bun run ai:session symbol "createUser"

# æŸ¥æ‰¾å®ç°æ¨¡å¼
bun run ai:session pattern "add_field" "User"
bun run ai:session pattern "create_api" "Product"
```

#### 2. ç›´æ¥ Neo4j æŸ¥è¯¢

```bash
# è¿è¡Œæ™ºèƒ½æŸ¥è¯¢å¼•æ“
bun dist/cli/index.js

# ç¤ºä¾‹æŸ¥è¯¢
> æ‰¾åˆ°æ‰€æœ‰è®¤è¯ç›¸å…³çš„ç±»
> æŸ¥æ‰¾æ‰€æœ‰Reactç»„ä»¶
> æ˜¾ç¤ºSchemaç›¸å…³çš„æ¥å£
```

### æ”¯æŒçš„æŸ¥è¯¢ç±»å‹

#### å®ä½“æŸ¥è¯¢

- **æŸ¥æ‰¾ç±»**: "æ‰¾åˆ°æ‰€æœ‰è®¤è¯ç›¸å…³çš„ç±»"
- **æŸ¥æ‰¾å‡½æ•°**: "æŸ¥æ‰¾createUserå‡½æ•°"
- **æŸ¥æ‰¾æ¥å£**: "æ˜¾ç¤ºSchemaç›¸å…³çš„æ¥å£"
- **æŸ¥æ‰¾ç»„ä»¶**: "æŸ¥æ‰¾æ‰€æœ‰Reactç»„ä»¶"

#### å…³ç³»æŸ¥è¯¢

- **ä¾èµ–å…³ç³»**: "æ˜¾ç¤ºPackageä¹‹é—´çš„ä¾èµ–"
- **è°ƒç”¨å…³ç³»**: "æŸ¥æ‰¾å“ªäº›å‡½æ•°è°ƒç”¨äº†authenticate"
- **ç»§æ‰¿å…³ç³»**: "æ˜¾ç¤ºComponentçš„ç»§æ‰¿å±‚æ¬¡"

#### æ¶æ„æŸ¥è¯¢

- **æ¨¡å—ç»“æ„**: "æ˜¾ç¤ºauthåŒ…çš„ç»“æ„"
- **APIå…³ç³»**: "æŸ¥æ‰¾tRPCè·¯ç”±å®šä¹‰"
- **Schemaå®šä¹‰**: "æ˜¾ç¤ºUserå®ä½“çš„å­—æ®µ"

## ğŸ”§ å·¥å…·é›†æˆå·¥ä½œæµ

### ğŸ”´ å¼ºåˆ¶ä½¿ç”¨åœºæ™¯

**æ‰€æœ‰AIå¼€å‘ã€æ–‡æ¡£ã€åˆ†ææ“ä½œéƒ½å¿…é¡»å…ˆé€šè¿‡Neo4jå›¾è°±è·å–é¡¹ç›®ä¸Šä¸‹æ–‡ï¼š**

#### ä»£ç å¼€å‘åœºæ™¯

1. **æ·»åŠ å­—æ®µ**: `bun run ai:session query "EntityName"`
2. **åˆ›å»ºAPI**: `bun run ai:session pattern "create_api" "EntityName"`
3. **ä¿®æ”¹ç°æœ‰åŠŸèƒ½**: `bun run ai:session symbol "FunctionName"`
4. **åˆ›å»ºæ–°ç»„ä»¶**: `bun run ai:session pattern "create_component"`
5. **é›†æˆç¬¬ä¸‰æ–¹åº“**: `bun run ai:session pattern "integration"`
6. **é‡æ„ä»£ç **: `bun run ai:session query "TargetEntity"`
7. **è°ƒè¯•é—®é¢˜**: `bun run ai:session symbol "ProblemFunction"`

#### æ–‡æ¡£æ“ä½œåœºæ™¯

8. **ç¼–å†™æ–‡æ¡£**: æŸ¥è¯¢ç›¸å…³ä»£ç å®ä½“ç¡®ä¿å‡†ç¡®æ€§
9. **æ›´æ–°APIæ–‡æ¡£**: `bun run ai:session symbol "APIFunction"`
10. **æ¶æ„åˆ†æ**: `bun run ai:session pattern "architecture_pattern"`

#### åˆ†æå’Œå†³ç­–åœºæ™¯

11. **æŠ€æœ¯é€‰å‹**: æŸ¥è¯¢ç°æœ‰æŠ€æœ¯æ ˆå’Œä¾èµ–å…³ç³»
12. **å½±å“åˆ†æ**: æŸ¥è¯¢å˜æ›´å½±å“çš„ç›¸å…³ç»„ä»¶
13. **ä»£ç å®¡æŸ¥**: éªŒè¯ä»£ç ä¸€è‡´æ€§å’Œæœ€ä½³å®è·µ

### ğŸ“‹ Claude çš„æ ‡å‡†å·¥ä½œæ¨¡å¼

**Phase 1: ç†è§£ç”¨æˆ·éœ€æ±‚**

```typescript
// Claudeå†…éƒ¨åˆ†æï¼ˆç¤ºä¾‹ï¼‰
const userRequest = 'æˆ‘è¦ç»™useråŠ ä¸€ä¸ªç”Ÿæ—¥å­—æ®µ'
const analysis = {
  action: 'add_field',
  entity: 'User',
  field: 'birthday',
  type: 'Date',
}
```

**Phase 2: æŸ¥è¯¢é¡¹ç›®ä¸Šä¸‹æ–‡**

```bash
# Claudeå¿…é¡»è°ƒç”¨å·¥å…·è·å–ä¿¡æ¯
bun run ai:session query "User"
```

**Phase 3: åŸºäºæŸ¥è¯¢ç»“æœæ‰§è¡Œå¼€å‘**

```typescript
// æ ¹æ®å·¥å…·è¿”å›çš„ä¿¡æ¯ï¼ŒClaudeä½¿ç”¨ç°æœ‰å·¥å…·ï¼š
await Read(userSchemaPath)      // è¯»å–schemaæ–‡ä»¶
await Edit(userSchemaPath, ...) // ç¼–è¾‘æ·»åŠ å­—æ®µ
await Bash("bunx prisma migrate dev") // åˆ›å»ºè¿ç§»
// ... ç»§ç»­å…¶ä»–æ­¥éª¤
```

### ğŸ¯ å·¥å…·è¿”å›çš„ç»“æ„åŒ–ä¿¡æ¯

```json
{
  "success": true,
  "results": {
    "primary_target": {
      "name": "User",
      "file_path": "packages/schema/src/user.ts",
      "current_fields": ["id", "name", "email"]
    },
    "related_files": {
      "schemas": ["packages/schema/src/user.ts"],
      "apis": ["packages/trpc/src/user.ts"],
      "ui_components": ["packages/ui/src/forms/UserForm.tsx"]
    },
    "suggestions": {
      "add_field": {
        "steps": [
          "1. ç¼–è¾‘ packages/schema/src/user.ts æ›´æ–°Schemaå®šä¹‰",
          "2. è¿è¡Œ bunx prisma migrate dev åˆ›å»ºæ•°æ®åº“è¿ç§»",
          "3. æ›´æ–°ç›¸å…³çš„tRPC API procedures",
          "4. æ›´æ–°ç›¸å…³çš„UIè¡¨å•ç»„ä»¶"
        ]
      }
    }
  }
}
```

## âš ï¸ é‡è¦çº¦æŸ

### ä¸¥æ ¼ç¦æ­¢çš„è¡Œä¸º

**âŒ ç»ä¸å…è®¸ï¼š**

- ç›´æ¥çŒœæµ‹æ–‡ä»¶ä½ç½®å’Œä»£ç ç»“æ„
- åœ¨æ²¡æœ‰æŸ¥è¯¢å·¥å…·ä¿¡æ¯çš„æƒ…å†µä¸‹ä¿®æ”¹ä»£ç 
- å¿½ç•¥å·¥å…·è¿”å›çš„å®ç°å»ºè®®
- åˆ›å»ºä¸ç°æœ‰æ¨¡å¼ä¸ä¸€è‡´çš„ä»£ç 
- **è·³è¿‡Neo4jä¸Šä¸‹æ–‡æŸ¥è¯¢ï¼Œç›´æ¥è¿›è¡Œä»»ä½•ä»£ç æ“ä½œ**
- **åŸºäºè®°å¿†æˆ–å‡è®¾è¿›è¡Œæ¶æ„åˆ†ææˆ–æŠ€æœ¯å†³ç­–**
- **ä¸éªŒè¯ä»£ç ä¸€è‡´æ€§å°±ç¼–å†™æ–‡æ¡£æˆ–æ³¨é‡Š**

### å¿…é¡»éµå¾ªçš„æµç¨‹

**âœ… å¿…é¡»éµå¾ªï¼š**

- **æ¯æ¬¡AIæ“ä½œå‰å¿…é¡»é€šè¿‡Neo4jå›¾è°±æŸ¥è¯¢è·å–å‡†ç¡®çš„é¡¹ç›®ä¸Šä¸‹æ–‡**
- ä¸¥æ ¼æŒ‰ç…§å·¥å…·å»ºè®®çš„æ–‡ä»¶è·¯å¾„å’Œæ¨¡å¼
- ä½¿ç”¨å·¥å…·è¿”å›çš„ç›¸å…³æ–‡ä»¶åˆ—è¡¨
- éµå¾ªLinchKitçš„æ¶æ„çº¦æŸå’Œæœ€ä½³å®è·µ
- **æ‰€æœ‰ä»£ç åˆ†æã€æ–‡æ¡£ç¼–å†™ã€æ¶æ„å†³ç­–éƒ½åŸºäºå®æ—¶å›¾è°±æ•°æ®**
- **ä»»ä½•æŠ€æœ¯é€‰å‹æˆ–å½±å“åˆ†æéƒ½å…ˆæŸ¥è¯¢ç°æœ‰ä¾èµ–å…³ç³»**

## ğŸª å®Œæ•´ä½¿ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ï¼šClaudeå¤„ç†æ·»åŠ å­—æ®µè¯·æ±‚

```
ç”¨æˆ·: "ç»™Useræ·»åŠ ä¸€ä¸ªphoneå­—æ®µ"

Claude: æˆ‘æ¥å¸®ä½ ä¸ºUseræ·»åŠ phoneå­—æ®µã€‚é¦–å…ˆè®©æˆ‘æŸ¥è¯¢Userå®ä½“çš„ç›¸å…³ä¿¡æ¯...

[è°ƒç”¨å·¥å…·]
$ bun run ai:session query "User"

æˆ‘å‘ç°Userå®šä¹‰åœ¨ packages/schema/src/user.tsï¼Œå½“å‰åŒ…å«å­—æ®µï¼šid, name, email

ç›¸å…³æ–‡ä»¶ï¼š
- Schema: packages/schema/src/user.ts
- API: packages/trpc/src/user.ts
- UI: packages/ui/src/forms/UserForm.tsx

ç°åœ¨æˆ‘æ¥æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

1. æ›´æ–°User Schema...
[ä½¿ç”¨Editå·¥å…·ä¿®æ”¹packages/schema/src/user.ts]

2. åˆ›å»ºæ•°æ®åº“è¿ç§»...
[ä½¿ç”¨Bashå·¥å…·è¿è¡Œbunx prisma migrate dev]

3. æ›´æ–°ç›¸å…³API...
[ç»§ç»­æ‰§è¡Œå…¶ä»–æ­¥éª¤]

4. åŒæ­¥å›¾è°±æ•°æ®...
[è¿è¡Œ bun run ai:session sync]

å®Œæˆï¼Userç°åœ¨æ”¯æŒphoneå­—æ®µäº†ã€‚
```

## ğŸ“ˆ æ€§èƒ½å’Œé™åˆ¶

### å½“å‰æ€§èƒ½æŒ‡æ ‡

- **æŸ¥è¯¢å“åº”æ—¶é—´**: 1.4-2.3 ç§’
- **æ„å›¾è¯†åˆ«å‡†ç¡®ç‡**: 70%+ ï¼ˆä¸­æ–‡æŸ¥è¯¢ï¼‰
- **ç»“æ„æŸ¥è¯¢å‡†ç¡®ç‡**: 90%+
- **æ•°æ®åŒæ­¥æ—¶é—´**: é€šå¸¸ < 30 ç§’

### å·²çŸ¥é™åˆ¶

- **ä½¿ç”¨å…³ç³»æŸ¥è¯¢**: éœ€è¦å¢å¼ºæ•°æ®æå–å™¨
- **å¤æ‚é€»è¾‘æŸ¥è¯¢**: å½“å‰ä¸»è¦æ”¯æŒç»“æ„åŒ–æŸ¥è¯¢
- **å®æ—¶æ›´æ–°**: éœ€è¦æ‰‹åŠ¨è§¦å‘åŒæ­¥

### æ”¹è¿›è®¡åˆ’

- [ ] å¢å¼ºä»£ç ä½¿ç”¨å…³ç³»çš„æå–
- [ ] æå‡è‡ªç„¶è¯­è¨€æŸ¥è¯¢è¯†åˆ«
- [ ] å®ç°å®æ—¶æ•°æ®åŒæ­¥
- [ ] æ·»åŠ æŸ¥è¯¢ç¼“å­˜æœºåˆ¶

---

**æ ¸å¿ƒåŸåˆ™ï¼šClaudeè´Ÿè´£ç†è§£å’Œæ‰§è¡Œï¼Œå·¥å…·è´Ÿè´£æä¾›å‡†ç¡®çš„é¡¹ç›®ä¿¡æ¯**
