# Linch Kit ä»£ç ä½ç½®ç´¢å¼•

**æœ€åæ›´æ–°**: 2025-06-21  
**æ–‡æ¡£ç‰ˆæœ¬**: v3.0  
**åŸå§‹æ¥æº**: æ–°å»ºæ–‡ä»¶ï¼Œæ•´åˆé¡¹ç›®å…³é”®ä»£ç ä½ç½®ä¿¡æ¯  
**ç»´æŠ¤è´£ä»»**: å¼€å‘å›¢é˜Ÿ

---

## ğŸ¯ å¿«é€Ÿå®šä½æŒ‡å—

æœ¬æ–‡æ¡£æä¾› Linch Kit é¡¹ç›®ä¸­å…³é”®æ–‡ä»¶å’ŒåŠŸèƒ½çš„å¿«é€Ÿå®šä½ä¿¡æ¯ï¼Œä¾¿äºå¼€å‘å’Œè°ƒè¯•ã€‚

## ğŸ“¦ æ ¸å¿ƒåŒ…ä»£ç ä½ç½®

### @linch-kit/core
```
packages/core/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli/                    # CLI ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ commands/           # CLI å‘½ä»¤å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ init.ts        # é¡¹ç›®åˆå§‹åŒ–å‘½ä»¤
â”‚   â”‚   â”‚   â”œâ”€â”€ dev.ts         # å¼€å‘æœåŠ¡å™¨å‘½ä»¤
â”‚   â”‚   â”‚   â””â”€â”€ build.ts       # æ„å»ºå‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ index.ts           # CLI å…¥å£ç‚¹
â”‚   â”‚   â””â”€â”€ plugin-loader.ts   # æ’ä»¶åŠ è½½å™¨
â”‚   â”œâ”€â”€ config/                # é…ç½®ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ types.ts           # é…ç½®ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ loader.ts          # é…ç½®åŠ è½½å™¨
â”‚   â”‚   â””â”€â”€ validator.ts       # é…ç½®éªŒè¯å™¨
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts               # åŒ…å…¥å£
â””â”€â”€ package.json               # åŒ…é…ç½®
```

### @linch-kit/schema âœ… å·²å‘å¸ƒ
```
packages/schema/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ decorators/            # Zod è£…é¥°å™¨
â”‚   â”‚   â”œâ”€â”€ primary.ts         # ä¸»é”®è£…é¥°å™¨
â”‚   â”‚   â”œâ”€â”€ unique.ts          # å”¯ä¸€çº¦æŸè£…é¥°å™¨
â”‚   â”‚   â”œâ”€â”€ timestamps.ts      # æ—¶é—´æˆ³è£…é¥°å™¨
â”‚   â”‚   â””â”€â”€ soft-delete.ts     # è½¯åˆ é™¤è£…é¥°å™¨
â”‚   â”œâ”€â”€ generators/            # ä»£ç ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ prisma.ts          # Prisma Schema ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ validators.ts      # éªŒè¯å™¨ç”Ÿæˆå™¨
â”‚   â”‚   â”œâ”€â”€ mocks.ts           # Mock æ•°æ®ç”Ÿæˆå™¨
â”‚   â”‚   â””â”€â”€ openapi.ts         # OpenAPI æ–‡æ¡£ç”Ÿæˆå™¨
â”‚   â”œâ”€â”€ entity/                # å®ä½“å®šä¹‰ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ define.ts          # defineEntity å‡½æ•°
â”‚   â”‚   â””â”€â”€ relations.ts       # å…³ç³»å®šä¹‰
â”‚   â”œâ”€â”€ cli/                   # CLI æ’ä»¶
â”‚   â”‚   â””â”€â”€ commands.ts        # Schema ç›¸å…³å‘½ä»¤
â”‚   â””â”€â”€ index.ts               # åŒ…å…¥å£
â””â”€â”€ package.json               # åŒ…é…ç½®
```

### @linch-kit/auth
```
packages/auth/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ providers/             # è®¤è¯æä¾›å•†
â”‚   â”‚   â”œâ”€â”€ credentials.ts     # ç”¨æˆ·åå¯†ç è®¤è¯
â”‚   â”‚   â”œâ”€â”€ oauth.ts           # OAuth è®¤è¯
â”‚   â”‚   â””â”€â”€ jwt.ts             # JWT å¤„ç†
â”‚   â”œâ”€â”€ permissions/           # æƒé™ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ rbac.ts            # åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
â”‚   â”‚   â”œâ”€â”€ abac.ts            # åŸºäºå±æ€§çš„è®¿é—®æ§åˆ¶
â”‚   â”‚   â””â”€â”€ field-level.ts     # å­—æ®µçº§æƒé™
â”‚   â”œâ”€â”€ entities/              # è®¤è¯ç›¸å…³å®ä½“
â”‚   â”‚   â”œâ”€â”€ user.ts            # ç”¨æˆ·å®ä½“
â”‚   â”‚   â”œâ”€â”€ role.ts            # è§’è‰²å®ä½“
â”‚   â”‚   â””â”€â”€ session.ts         # ä¼šè¯å®ä½“
â”‚   â””â”€â”€ index.ts               # åŒ…å…¥å£
â””â”€â”€ package.json               # åŒ…é…ç½®
```

### @linch-kit/crud
```
packages/crud/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ manager/               # CRUD ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ crud-manager.ts    # ä¸»è¦ CRUD ç®¡ç†å™¨ç±»
â”‚   â”‚   â””â”€â”€ operations.ts      # CRUD æ“ä½œå®ç°
â”‚   â”œâ”€â”€ permissions/           # æƒé™é›†æˆ
â”‚   â”‚   â”œâ”€â”€ operation-level.ts # æ“ä½œçº§æƒé™
â”‚   â”‚   â”œâ”€â”€ field-level.ts     # å­—æ®µçº§æƒé™
â”‚   â”‚   â””â”€â”€ row-level.ts       # è¡Œçº§æƒé™
â”‚   â”œâ”€â”€ events/                # äº‹ä»¶ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ crud-events.ts     # CRUD äº‹ä»¶å®šä¹‰
â”‚   â””â”€â”€ index.ts               # åŒ…å…¥å£
â””â”€â”€ package.json               # åŒ…é…ç½®
```

### @linch-kit/trpc
```
packages/trpc/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server/                # æœåŠ¡ç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ context.ts         # tRPC ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ router.ts          # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ middleware.ts      # ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ client/                # å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ react.ts           # React Query é›†æˆ
â”‚   â”‚   â””â”€â”€ vanilla.ts         # åŸç”Ÿå®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ generators/            # è·¯ç”±ç”Ÿæˆå™¨
â”‚   â”‚   â””â”€â”€ crud-routes.ts     # CRUD è·¯ç”±ç”Ÿæˆ
â”‚   â””â”€â”€ index.ts               # åŒ…å…¥å£
â””â”€â”€ package.json               # åŒ…é…ç½®
```

### @linch-kit/ui
```
packages/ui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/            # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ui/                # shadcn/ui ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ forms/             # è¡¨å•ç»„ä»¶
â”‚   â”‚   â””â”€â”€ layouts/           # å¸ƒå±€ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                 # React Hooks
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ index.ts               # åŒ…å…¥å£
â”œâ”€â”€ blocks.ts                  # ç»„ä»¶å—å®šä¹‰
â””â”€â”€ package.json               # åŒ…é…ç½®
```

## ğŸš€ åº”ç”¨ä»£ç ä½ç½®

### linch-starter åº”ç”¨
```
apps/starter/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                   # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â”‚   â””â”€â”€ trpc/          # tRPC API ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ login/         # ç™»å½•é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ register/      # æ³¨å†Œé¡µé¢
â”‚   â”‚   â”œâ”€â”€ dashboard/         # ä»ªè¡¨æ¿é¡µé¢
â”‚   â”‚   â””â”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ components/            # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-context.tsx    # è®¤è¯ä¸Šä¸‹æ–‡
â”‚   â”‚   â”‚   â”œâ”€â”€ auth-guard.tsx      # è·¯ç”±ä¿æŠ¤
â”‚   â”‚   â”‚   â””â”€â”€ login-form.tsx      # ç™»å½•è¡¨å•
â”‚   â”‚   â”œâ”€â”€ ui/                # UI ç»„ä»¶
â”‚   â”‚   â””â”€â”€ providers/         # ä¸Šä¸‹æ–‡æä¾›è€…
â”‚   â”œâ”€â”€ lib/                   # å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ trpc.ts            # tRPC å®¢æˆ·ç«¯é…ç½®
â”‚   â”‚   â”œâ”€â”€ auth.ts            # è®¤è¯é…ç½®
â”‚   â”‚   â””â”€â”€ prisma.ts          # Prisma å®¢æˆ·ç«¯
â”‚   â””â”€â”€ entities/              # å®ä½“å®šä¹‰
â”‚       â”œâ”€â”€ user.ts            # ç”¨æˆ·å®ä½“
â”‚       â””â”€â”€ role.ts            # è§’è‰²å®ä½“
â”œâ”€â”€ prisma/                    # Prisma é…ç½®
â”‚   â””â”€â”€ schema.prisma          # æ•°æ®åº“æ¨¡å¼ (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ linch.config.ts            # Linch Kit é…ç½®
â””â”€â”€ package.json               # åº”ç”¨é…ç½®
```

## ğŸ”§ é…ç½®æ–‡ä»¶ä½ç½®

### é¡¹ç›®çº§é…ç½®
```
linch-kit/
â”œâ”€â”€ linch.config.ts            # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ turbo.json                 # Turborepo é…ç½®
â”œâ”€â”€ pnpm-workspace.yaml        # pnpm å·¥ä½œç©ºé—´é…ç½®
â”œâ”€â”€ package.json               # æ ¹åŒ…é…ç½®
â””â”€â”€ .env.example               # ç¯å¢ƒå˜é‡æ¨¡æ¿
```

### æ„å»ºé…ç½®
```
configs/
â”œâ”€â”€ tsconfig.base.json         # TypeScript åŸºç¡€é…ç½®
â”œâ”€â”€ tsconfig.build.json        # æ„å»ºé…ç½®
â”œâ”€â”€ tsup.base.ts              # tsup åŸºç¡€é…ç½®
â”œâ”€â”€ eslint.config.js          # ESLint é…ç½®
â””â”€â”€ jest.config.js            # Jest é…ç½®
```

## ğŸ—„ï¸ æ•°æ®åº“ç›¸å…³

### Prisma é…ç½®
```
apps/starter/prisma/
â”œâ”€â”€ schema.prisma             # æ•°æ®åº“æ¨¡å¼ (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ migrations/               # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â””â”€â”€ seed.ts                   # æ•°æ®åº“ç§å­æ–‡ä»¶
```

### å®ä½“å®šä¹‰
```
apps/starter/src/entities/
â”œâ”€â”€ user.ts                   # ç”¨æˆ·å®ä½“å®šä¹‰
â”œâ”€â”€ role.ts                   # è§’è‰²å®ä½“å®šä¹‰
â”œâ”€â”€ session.ts                # ä¼šè¯å®ä½“å®šä¹‰
â””â”€â”€ index.ts                  # å®ä½“å¯¼å‡º
```

## ğŸ§ª æµ‹è¯•æ–‡ä»¶ä½ç½®

### åŒ…æµ‹è¯•
```
packages/*/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ __tests__/            # å•å…ƒæµ‹è¯•
â”‚       â”œâ”€â”€ *.test.ts         # æµ‹è¯•æ–‡ä»¶
â”‚       â””â”€â”€ fixtures/         # æµ‹è¯•æ•°æ®
â””â”€â”€ tests/
    â”œâ”€â”€ integration/          # é›†æˆæµ‹è¯•
    â””â”€â”€ e2e/                  # ç«¯åˆ°ç«¯æµ‹è¯•
```

### åº”ç”¨æµ‹è¯•
```
apps/starter/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ __tests__/            # ç»„ä»¶æµ‹è¯•
â””â”€â”€ tests/
    â”œâ”€â”€ api/                  # API æµ‹è¯•
    â”œâ”€â”€ pages/                # é¡µé¢æµ‹è¯•
    â””â”€â”€ e2e/                  # ç«¯åˆ°ç«¯æµ‹è¯•
```

## ğŸ“ æ–‡æ¡£ä½ç½®

### AI ä¸Šä¸‹æ–‡æ–‡æ¡£
```
ai-context/zh/
â”œâ”€â”€ core/                     # é¡¹ç›®æ ¸å¿ƒä¿¡æ¯
â”œâ”€â”€ standards/                # å¼€å‘è§„èŒƒ
â””â”€â”€ tasks/                    # ä»»åŠ¡ç®¡ç†
```

### ç”¨æˆ·æ–‡æ¡£
```
docs/
â”œâ”€â”€ README.md                 # æ–‡æ¡£é¦–é¡µ
â”œâ”€â”€ quick-start.md            # å¿«é€Ÿå¼€å§‹
â”œâ”€â”€ monorepo-architecture.md  # æ¶æ„æ–‡æ¡£
â””â”€â”€ troubleshooting.md        # æ•…éšœæ’é™¤
```

## ğŸ” å…³é”®åŠŸèƒ½å…¥å£ç‚¹

### CLI å‘½ä»¤å…¥å£
- **ä¸» CLI**: `packages/core/src/cli/index.ts`
- **Schema å‘½ä»¤**: `packages/schema/src/cli/commands.ts`
- **æ’ä»¶åŠ è½½**: `packages/core/src/cli/plugin-loader.ts`

### API å…¥å£ç‚¹
- **tRPC æœåŠ¡ç«¯**: `apps/starter/src/app/api/trpc/[trpc]/route.ts`
- **è®¤è¯ API**: `apps/starter/src/lib/auth.ts`
- **æ•°æ®åº“å®¢æˆ·ç«¯**: `apps/starter/src/lib/prisma.ts`

### å‰ç«¯å…¥å£ç‚¹
- **åº”ç”¨æ ¹ç»„ä»¶**: `apps/starter/src/app/layout.tsx`
- **è®¤è¯ä¸Šä¸‹æ–‡**: `apps/starter/src/components/auth/auth-context.tsx`
- **tRPC å®¢æˆ·ç«¯**: `apps/starter/src/lib/trpc.ts`

---

**ä½¿ç”¨æç¤º**: 
1. ä½¿ç”¨ `Ctrl+F` å¿«é€Ÿæœç´¢ç‰¹å®šæ–‡ä»¶æˆ–åŠŸèƒ½
2. æ‰€æœ‰è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶éƒ½æ ‡æ³¨äº† `(è‡ªåŠ¨ç”Ÿæˆ)` 
3. å…³é”®é…ç½®æ–‡ä»¶çš„ä¿®æ”¹éœ€è¦é‡å¯å¼€å‘æœåŠ¡å™¨
4. å®ä½“å®šä¹‰ä¿®æ”¹åéœ€è¦è¿è¡Œ `pnpm linch schema:generate:prisma` é‡æ–°ç”Ÿæˆæ•°æ®åº“æ¨¡å¼
