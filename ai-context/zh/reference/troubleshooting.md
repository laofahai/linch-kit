# æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ å½“å‰å·²çŸ¥é—®é¢˜

### 1. CLI å‘½ä»¤æ ¼å¼é—®é¢˜ (æœ€é«˜ä¼˜å…ˆçº§)
**é—®é¢˜**: `linch plugin-list` å‘½ä»¤æ˜¾ç¤º "Unknown command"

**ç—‡çŠ¶**:
```bash
cd apps/starter
pnpm linch plugin-list
# è¾“å‡º: Unknown command: plugin-list
```

**å¯èƒ½åŸå› **:
- æ’ä»¶åŠ è½½æµç¨‹æœ‰é—®é¢˜
- å‘½ä»¤æ³¨å†Œæœºåˆ¶å¤±æ•ˆ
- é…ç½®æ–‡ä»¶è·¯å¾„é”™è¯¯

**è°ƒè¯•æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥åŸºç¡€ CLI åŠŸèƒ½
pnpm linch --help

# 2. æ£€æŸ¥æ’ä»¶åŠ è½½
# æŸ¥çœ‹æ–‡ä»¶: packages/core/src/cli/core/plugin-loader.ts

# 3. æ£€æŸ¥å‘½ä»¤æ³¨å†Œ
# æŸ¥çœ‹æ–‡ä»¶: packages/core/src/cli/core/command-registry.ts

# 4. æ£€æŸ¥ Schema æ’ä»¶
# æŸ¥çœ‹æ–‡ä»¶: packages/schema/src/plugins/cli-plugin.ts
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ’ä»¶å‘ç°æœºåˆ¶
2. éªŒè¯å‘½ä»¤æ³¨å†Œæµç¨‹
3. ç¡®è®¤é…ç½®æ–‡ä»¶åŠ è½½

### 2. é…ç½®æ–‡ä»¶ç»Ÿä¸€é—®é¢˜ (é«˜ä¼˜å…ˆçº§)
**é—®é¢˜**: Schema CLI æ’ä»¶éœ€è¦ä» `linch.config.ts` è¯»å–é…ç½®

**ç—‡çŠ¶**:
- Schema å‘½ä»¤æ— æ³•æ‰¾åˆ°å®ä½“
- é…ç½®åŠ è½½å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. ä¿®æ”¹ `packages/schema/src/plugins/cli-plugin.ts`
2. ç¡®ä¿ä»ç»Ÿä¸€é…ç½®æ–‡ä»¶è¯»å–
3. éªŒè¯é…ç½®è·¯å¾„æ­£ç¡®

### 3. Schema å‘½ä»¤éªŒè¯é—®é¢˜ (é«˜ä¼˜å…ˆçº§)
**é—®é¢˜**: Schema ç›¸å…³å‘½ä»¤å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œ

**æµ‹è¯•å‘½ä»¤**:
```bash
cd apps/starter
pnpm linch schema-list
pnpm linch schema-generate-prisma
```

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥å®ä½“æ–‡ä»¶è·¯å¾„
2. éªŒè¯é…ç½®ä¸­çš„ schemaDir è®¾ç½®
3. ç¡®è®¤å®ä½“å®šä¹‰æ­£ç¡®

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### CLI é—®é¢˜

#### é—®é¢˜: CLI å‘½ä»¤ä¸å·¥ä½œ
**ç—‡çŠ¶**: è¿è¡Œ `pnpm linch` å‘½ä»¤æ—¶å‡ºé”™

**è§£å†³æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥å·¥ä½œç›®å½•
pwd
# åº”è¯¥åœ¨ /home/laofahai/workspace/linch-kit

# 2. æ£€æŸ¥ CLI å…¥å£
ls -la apps/starter/scripts/linch.js

# 3. æ£€æŸ¥åŒ…æ„å»º
pnpm build

# 4. é‡æ–°å®‰è£…ä¾èµ–
pnpm install
```

#### é—®é¢˜: æ’ä»¶åŠ è½½å¤±è´¥
**ç—‡çŠ¶**: æ’ä»¶ç›¸å…³å‘½ä»¤ä¸å¯ç”¨

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥æ’ä»¶ç›®å½•: `packages/*/plugins/`
2. éªŒè¯æ’ä»¶æ³¨å†Œ: `packages/core/src/cli/core/plugin-loader.ts`
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
4. é‡æ–°æ„å»ºç›¸å…³åŒ…

#### é—®é¢˜: é…ç½®åŠ è½½å¤±è´¥
**ç—‡çŠ¶**: é…ç½®ç›¸å…³å‘½ä»¤æŠ¥é”™

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥é…ç½®æ–‡ä»¶: `apps/starter/linch.config.ts`
2. éªŒè¯é…ç½®æ ¼å¼
3. æ£€æŸ¥é…ç½®ç®¡ç†å™¨: `packages/core/src/config/`

### æ„å»ºé—®é¢˜

#### é—®é¢˜: æ„å»ºå¤±è´¥
**ç—‡çŠ¶**: `pnpm build` å‘½ä»¤å¤±è´¥

**è§£å†³æ­¥éª¤**:
```bash
# 1. æ¸…ç†æ„å»ºç¼“å­˜
pnpm clean

# 2. é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules
pnpm install

# 3. æ£€æŸ¥ TypeScript é”™è¯¯
pnpm type-check

# 4. é€ä¸ªåŒ…æ„å»º
cd packages/core && pnpm build
cd packages/schema && pnpm build
```

#### é—®é¢˜: TypeScript ç±»å‹é”™è¯¯
**ç—‡çŠ¶**: ç±»å‹æ£€æŸ¥å¤±è´¥

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥ç±»å‹å®šä¹‰: `packages/types/`
2. éªŒè¯åŒ…ä¾èµ–ç‰ˆæœ¬
3. æ›´æ–°ç±»å‹å®šä¹‰
4. é‡æ–°æ„å»ºç±»å‹åŒ…

### ä¾èµ–é—®é¢˜

#### é—®é¢˜: åŒ…ä¾èµ–å†²çª
**ç—‡çŠ¶**: å®‰è£…æˆ–æ„å»ºæ—¶ä¾èµ–å†²çª

**è§£å†³æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥ä¾èµ–æ ‘
pnpm list

# 2. æ¸…ç†ä¾èµ–
pnpm clean
rm -rf node_modules

# 3. é‡æ–°å®‰è£…
pnpm install

# 4. æ£€æŸ¥ package.json ç‰ˆæœ¬
```

#### é—®é¢˜: åŒ…ç‰ˆæœ¬ä¸ä¸€è‡´
**ç—‡çŠ¶**: ä¸åŒåŒ…ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ä¾èµ–

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥æ ¹ç›®å½• `package.json`
2. ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬
3. ä½¿ç”¨ `pnpm update`
4. é‡æ–°æ„å»º

### Schema é—®é¢˜

#### é—®é¢˜: å®ä½“å®šä¹‰ä¸è¢«è¯†åˆ«
**ç—‡çŠ¶**: `linch schema-list` æ˜¾ç¤ºç©ºåˆ—è¡¨

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥å®ä½“æ–‡ä»¶è·¯å¾„: `apps/starter/app/_lib/schemas/`
2. éªŒè¯å®ä½“å®šä¹‰æ ¼å¼
3. æ£€æŸ¥é…ç½®ä¸­çš„ `schemaDir`
4. ç¡®è®¤æ–‡ä»¶å¯¼å‡ºæ­£ç¡®

#### é—®é¢˜: Prisma ç”Ÿæˆå¤±è´¥
**ç—‡çŠ¶**: `linch schema-generate-prisma` å¤±è´¥

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥å®ä½“å®šä¹‰è¯­æ³•
2. éªŒè¯ Zod è£…é¥°å™¨ä½¿ç”¨
3. æŸ¥çœ‹ç”Ÿæˆå™¨é”™è¯¯æ—¥å¿—
4. æ‰‹åŠ¨éªŒè¯ Schema å®šä¹‰

### æ•°æ®åº“é—®é¢˜

#### é—®é¢˜: æ•°æ®åº“è¿æ¥å¤±è´¥
**ç—‡çŠ¶**: åº”ç”¨æ— æ³•è¿æ¥æ•°æ®åº“

**è§£å†³æ­¥éª¤**:
1. æ£€æŸ¥ç¯å¢ƒå˜é‡: `.env.local`
2. éªŒè¯æ•°æ®åº“ URL
3. æµ‹è¯•æ•°æ®åº“è¿æ¥
4. æ£€æŸ¥ç½‘ç»œå’Œé˜²ç«å¢™

#### é—®é¢˜: Prisma è¿ç§»å¤±è´¥
**ç—‡çŠ¶**: æ•°æ®åº“è¿ç§»å‘½ä»¤å¤±è´¥

**è§£å†³æ­¥éª¤**:
```bash
# 1. æ£€æŸ¥ Prisma schema
cat prisma/schema.prisma

# 2. é‡ç½®æ•°æ®åº“
pnpm prisma db push --force-reset

# 3. ç”Ÿæˆ Prisma å®¢æˆ·ç«¯
pnpm prisma generate

# 4. è¿è¡Œè¿ç§»
pnpm prisma db push
```

## ğŸ” è°ƒè¯•æŠ€å·§

### æ—¥å¿—æŸ¥çœ‹
```bash
# CLI è°ƒè¯•æ¨¡å¼
DEBUG=linch:* pnpm linch command

# æŸ¥çœ‹æ„å»ºæ—¥å¿—
pnpm build --verbose

# æŸ¥çœ‹æµ‹è¯•æ—¥å¿—
pnpm test --verbose
```

### æ–‡ä»¶æ£€æŸ¥
```bash
# æ£€æŸ¥å…³é”®æ–‡ä»¶
ls -la apps/starter/linch.config.ts
ls -la packages/core/src/cli/
ls -la packages/schema/src/plugins/

# æ£€æŸ¥æ„å»ºè¾“å‡º
ls -la packages/*/dist/
```

### ç¯å¢ƒéªŒè¯
```bash
# æ£€æŸ¥ Node.js ç‰ˆæœ¬
node --version  # åº”è¯¥æ˜¯ 20+

# æ£€æŸ¥ pnpm ç‰ˆæœ¬
pnpm --version

# æ£€æŸ¥å·¥ä½œç›®å½•
pwd  # åº”è¯¥åœ¨é¡¹ç›®æ ¹ç›®å½•
```

## ğŸ“ è·å–å¸®åŠ©

### æ–‡æ¡£èµ„æº
- [å¿«é€Ÿå‚è€ƒ](./quick-reference.md) - å¿«é€ŸæŸ¥æ‰¾ä¿¡æ¯
- [å¼€å‘æµç¨‹](../workflows/development.md) - å¼€å‘è§„èŒƒ
- [åŒ…æ–‡æ¡£](../packages/) - å„åŒ…è¯¦ç»†æ–‡æ¡£

### è°ƒè¯•èµ„æº
- [ç³»ç»Ÿæ¶æ„](../architecture/system-architecture.md) - ç†è§£ç³»ç»Ÿè®¾è®¡
- [éƒ¨ç½²é…ç½®](./deployment-configurations.md) - éƒ¨ç½²ç›¸å…³é…ç½®

### ç¤¾åŒºèµ„æº
- GitHub Issues - æŠ¥å‘Šé—®é¢˜
- é¡¹ç›®æ–‡æ¡£ - æŸ¥çœ‹æœ€æ–°ä¿¡æ¯
- AI åŠ©æ‰‹ - è·å–å³æ—¶å¸®åŠ©

---

**æœ€åæ›´æ–°**: 2025-06-20  
**ç»´æŠ¤**: æ ¹æ®å®é™…é—®é¢˜æŒç»­æ›´æ–°  
**ç”¨é€”**: å¿«é€Ÿè§£å†³å¼€å‘å’Œä½¿ç”¨ä¸­é‡åˆ°çš„é—®é¢˜
