# LinchKit UI åŒ…æ¶æ„æ”¹è¿› - å·¥ä½œæ¢å¤æç¤º

**åˆ›å»ºæ—¶é—´**: 2025-06-21 15:30
**ä»»åŠ¡çŠ¶æ€**: å·²æš‚åœï¼Œç­‰å¾…æ¶æ„æ”¹è¿›æŒ‡å¯¼

## ğŸ¯ å½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡

### ä¸»è¦ä»»åŠ¡: LinchKit UI åŒ…æ ¸å¿ƒæ”¹è¿›
**ä¼˜å…ˆçº§**: é«˜
**ä¾èµ–å…³ç³»**: UI åŒ…æ”¹è¿› â†’ schema æ‰©å±• â†’ å…¶ä»–åŒ…é€‚é…

### èƒŒæ™¯è¯´æ˜
LinchKit UI ç»„ä»¶åº“é˜¶æ®µ 2 å¼€å‘å·²å®Œæˆ 70%ï¼ŒåŒ…æ‹¬ CRUD ç»„ä»¶å’Œ UI Blocks çš„åŸºç¡€å®ç°ã€‚ç°éœ€è¦æ ¹æ®æ–°çš„æ¶æ„è¦æ±‚è¿›è¡Œæ ¸å¿ƒæ”¹è¿›ï¼Œé‡ç‚¹å…³æ³¨å›½é™…åŒ–æ”¯æŒã€ç¬¬ä¸‰æ–¹ç»„ä»¶å°è£…ç­–ç•¥ä¼˜åŒ–ã€schema é©±åŠ¨çš„æ·±åº¦é›†æˆã€‚

## ğŸ“ ä»£ç çŠ¶æ€

### å·²å®ç°çš„æ ¸å¿ƒç»„ä»¶
```
packages/ui/src/components/
â”œâ”€â”€ crud/
â”‚   â”œâ”€â”€ data-table.tsx          # TanStack Table å°è£…ï¼Œéœ€è¦ schema é›†æˆ
â”‚   â”œâ”€â”€ form-builder.tsx        # React Hook Form å°è£…ï¼Œéœ€è¦ i18n æ”¯æŒ
â”‚   â”œâ”€â”€ searchable-select.tsx   # æœç´¢é€‰æ‹©å™¨ï¼Œéœ€è¦ä¼˜åŒ–å°è£…ç­–ç•¥
â”‚   â””â”€â”€ index.ts                # CRUD ç»„ä»¶å¯¼å‡º
â”œâ”€â”€ blocks/
â”‚   â”œâ”€â”€ dashboard-layout.tsx    # ä»ªè¡¨æ¿å¸ƒå±€ï¼Œéœ€è¦ i18n æ”¯æŒ
â”‚   â”œâ”€â”€ auth-forms.tsx          # è®¤è¯è¡¨å•ï¼Œéœ€è¦ i18n é›†æˆ
â”‚   â”œâ”€â”€ data-display.tsx        # æ•°æ®å±•ç¤ºç»„ä»¶
â”‚   â””â”€â”€ index.ts                # Blocks ç»„ä»¶å¯¼å‡º
â””â”€â”€ ui/                         # åŸºç¡€ shadcn/ui ç»„ä»¶ (20+ ç»„ä»¶)
```

### å…³é”®ä»£ç ä½ç½®
1. **DataTable ç»„ä»¶** (`packages/ui/src/components/crud/data-table.tsx`)
   - ç¬¬ 295-301 è¡Œ: æœç´¢åŠŸèƒ½å®ç°ï¼Œéœ€è¦ schema å­—æ®µé…ç½®
   - ç¬¬ 401-407 è¡Œ: åˆ†é¡µé…ç½®ï¼Œéœ€è¦å›½é™…åŒ–æ–‡æœ¬
   - éœ€è¦æ·»åŠ åŸºäº schema çš„é«˜çº§ç­›é€‰åŠŸèƒ½

2. **FormBuilder ç»„ä»¶** (`packages/ui/src/components/crud/form-builder.tsx`)
   - ç¬¬ 175-190 è¡Œ: è¡¨å•åˆå§‹åŒ–ï¼Œéœ€è¦ i18n é›†æˆ
   - ç¬¬ 233-237 è¡Œ: å­—æ®µæ¸²æŸ“ï¼Œéœ€è¦ schema é©±åŠ¨é…ç½®
   - éœ€è¦å‚è€ƒ `packages/auth-core/src/i18n/` çš„å®ç°æ¨¡å¼

3. **åŒ…å¯¼å‡ºé…ç½®** (`packages/ui/package.json`)
   - ç¬¬ 6-14 è¡Œ: å¯¼å‡ºé…ç½®ï¼Œå·²æ”¯æŒå­æ¨¡å—
   - éœ€è¦æ·»åŠ  i18n ç›¸å…³ä¾èµ–

### æµ‹è¯•é¡µé¢çŠ¶æ€
- `/test-crud` - CRUD ç»„ä»¶æ¼”ç¤º (http://localhost:3002/test-crud)
- `/test-blocks` - UI Blocks æ¼”ç¤º (http://localhost:3002/test-blocks)
- å½“å‰å¯æ­£å¸¸è¿è¡Œï¼Œå¯ä½œä¸ºæ”¹è¿›éªŒè¯åŸºç¡€

## ğŸ”§ ä¸‹ä¸€æ­¥æ“ä½œ (ç²¾ç¡®åˆ°å‡½æ•°/ç»„ä»¶çº§åˆ«)

### ç¬¬ä¸€é˜¶æ®µ: å›½é™…åŒ–æ”¯æŒé›†æˆ (1-2 å¤©)

#### 1.1 ç ”ç©¶ auth-core çš„ i18n å®ç°æ¨¡å¼
```bash
# åˆ†æç°æœ‰ i18n å®ç°
cd packages/auth-core/src/i18n/
# æŸ¥çœ‹ index.ts, locales/, types.ts çš„å®ç°æ¨¡å¼
```

#### 1.2 åœ¨ UI åŒ…ä¸­å®ç° i18n åŸºç¡€è®¾æ–½
**æ–°å¢æ–‡ä»¶**:
- `packages/ui/src/i18n/index.ts` - i18n ä¸»å…¥å£
- `packages/ui/src/i18n/types.ts` - i18n ç±»å‹å®šä¹‰
- `packages/ui/src/i18n/locales/zh.ts` - ä¸­æ–‡è¯­è¨€åŒ…
- `packages/ui/src/i18n/locales/en.ts` - è‹±æ–‡è¯­è¨€åŒ…

**ä¿®æ”¹æ–‡ä»¶**:
- `packages/ui/src/components/crud/form-builder.tsx`
  - åœ¨ `FormBuilder` å‡½æ•°å¼€å¤´æ·»åŠ  `const { t } = useTranslation('ui')`
  - æ›¿æ¢ç¡¬ç¼–ç æ–‡æœ¬ä¸º `t('form.submit')` ç­‰
- `packages/ui/src/components/crud/data-table.tsx`
  - åœ¨ `DataTable` å‡½æ•°å¼€å¤´æ·»åŠ  i18n hook
  - æ›¿æ¢ "Search...", "No results found." ç­‰æ–‡æœ¬

#### 1.3 æ›´æ–°åŒ…ä¾èµ–
**ä¿®æ”¹æ–‡ä»¶**: `packages/ui/package.json`
```json
{
  "dependencies": {
    "react-i18next": "^13.x.x",
    "i18next": "^23.x.x"
  }
}
```

### ç¬¬äºŒé˜¶æ®µ: ç¬¬ä¸‰æ–¹ç»„ä»¶å°è£…ç­–ç•¥ä¼˜åŒ– (1-2 å¤©)

#### 2.1 ä¼˜åŒ– DataTable ç»„ä»¶å°è£…
**ä¿®æ”¹æ–‡ä»¶**: `packages/ui/src/components/crud/data-table.tsx`
- ç¬¬ 77-95 è¡Œ: æ·»åŠ  `tableProps?: Partial<TableOptions<TData>>` å‚æ•°
- ç¬¬ 220-250 è¡Œ: åœ¨ `useReactTable` è°ƒç”¨ä¸­åˆå¹¶ `tableProps`
- æ·»åŠ  `...tableProps` é€ä¼ æœºåˆ¶ï¼Œä¿ç•™ TanStack Table åŸç”Ÿ API è®¿é—®

#### 2.2 ä¼˜åŒ– FormBuilder ç»„ä»¶å°è£…
**ä¿®æ”¹æ–‡ä»¶**: `packages/ui/src/components/crud/form-builder.tsx`
- ç¬¬ 85-105 è¡Œ: æ·»åŠ  `formProps?: UseFormProps<TFormData>` å‚æ•°
- ç¬¬ 175-190 è¡Œ: åœ¨ `useForm` è°ƒç”¨ä¸­åˆå¹¶ `formProps`
- ç¡®ä¿ç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨ React Hook Form çš„é«˜çº§ç‰¹æ€§

#### 2.3 ä¼˜åŒ– SearchableSelect ç»„ä»¶å°è£…
**ä¿®æ”¹æ–‡ä»¶**: `packages/ui/src/components/crud/searchable-select.tsx`
- ç¬¬ 50-80 è¡Œ: æ·»åŠ  `commandProps?: ComponentProps<typeof Command>` å‚æ•°
- ä¿ç•™å¯¹ Command ç»„ä»¶åŸç”Ÿ API çš„è®¿é—®èƒ½åŠ›

### ç¬¬ä¸‰é˜¶æ®µ: Schema é©±åŠ¨çš„æ·±åº¦é›†æˆ (2-3 å¤©)

#### 3.1 æ‰©å±• schema å®šä¹‰ä»¥æ”¯æŒ UI é…ç½®
**ä¿®æ”¹æ–‡ä»¶**: `packages/schema/src/types.ts`
- æ·»åŠ  UI ç›¸å…³çš„å­—æ®µé…ç½®é€‰é¡¹
- å®šä¹‰è¡¨æ ¼åˆ—é…ç½®ã€è¡¨å•å­—æ®µé…ç½®ç­‰ç±»å‹

#### 3.2 å®ç° DataTable çš„ schema é›†æˆ
**ä¿®æ”¹æ–‡ä»¶**: `packages/ui/src/components/crud/data-table.tsx`
- æ·»åŠ  `generateColumnsFromSchema` å‡½æ•°
- å®ç°åŸºäº schema çš„é«˜çº§ç­›é€‰åŠŸèƒ½
- æ·»åŠ  `schemaConfig?: SchemaTableConfig` å‚æ•°

#### 3.3 å®ç° FormBuilder çš„ schema é›†æˆ
**ä¿®æ”¹æ–‡ä»¶**: `packages/ui/src/components/crud/form-builder.tsx`
- å¢å¼º `useFormFields` hookï¼Œæ”¯æŒä» schema è‡ªåŠ¨ç”Ÿæˆå­—æ®µé…ç½®
- æ·»åŠ  schema éªŒè¯è§„åˆ™çš„è‡ªåŠ¨æ˜ å°„

## ğŸ”— ä¾èµ–å…³ç³»

### åŒ…é—´ä¾èµ–å½±å“åˆ†æ
1. **UI åŒ…æ”¹è¿›** â†’ **schema åŒ…æ‰©å±•**
   - UI ç»„ä»¶éœ€è¦ schema åŒ…æä¾› UI é…ç½®ç±»å‹
   - éœ€è¦åŒæ­¥æ›´æ–° schema åŒ…çš„ç±»å‹å®šä¹‰

2. **UI åŒ…æ”¹è¿›** â†’ **auth-core åŒ…**
   - éœ€è¦å¤ç”¨ auth-core çš„ i18n å®ç°æ¨¡å¼
   - å¯èƒ½éœ€è¦æå–å…±äº«çš„ i18n å·¥å…·åˆ° core åŒ…

3. **UI åŒ…æ”¹è¿›** â†’ **å…¶ä»–åŒ…é€‚é…**
   - crud åŒ…å¯èƒ½éœ€è¦æ›´æ–°ä»¥é€‚é…æ–°çš„ UI ç»„ä»¶ API
   - starter åº”ç”¨éœ€è¦æ›´æ–°ä»¥ä½¿ç”¨æ–°çš„ç»„ä»¶ç‰¹æ€§

### ç‰ˆæœ¬å…¼å®¹æ€§è¦æ±‚
- ç¡®ä¿æ‰€æœ‰åŒ…çš„ TypeScript ç±»å‹å…¼å®¹
- ç»´æŠ¤å‘åå…¼å®¹æ€§ï¼Œé¿å…ç ´åæ€§å˜æ›´
- åŒæ­¥æ›´æ–°ç›¸å…³åŒ…çš„ç‰ˆæœ¬å·

## ğŸ§ª æµ‹è¯•è¦æ±‚

### å¿…é¡»è¿è¡Œçš„æµ‹è¯•å‘½ä»¤
```bash
# ç±»å‹æ£€æŸ¥
cd packages/ui && pnpm check-types
cd packages/schema && pnpm check-types
cd apps/linch-starter && pnpm type-check

# æ„å»ºéªŒè¯
cd packages/ui && pnpm build
cd packages/schema && pnpm build

# åŠŸèƒ½éªŒè¯
cd apps/linch-starter && pnpm dev --port 3002
# è®¿é—® http://localhost:3002/test-crud
# è®¿é—® http://localhost:3002/test-blocks
```

### éªŒè¯æ­¥éª¤
1. **å›½é™…åŒ–éªŒè¯**: åˆ‡æ¢è¯­è¨€ï¼Œç¡®ä¿æ‰€æœ‰æ–‡æœ¬æ­£ç¡®ç¿»è¯‘
2. **å°è£…ç­–ç•¥éªŒè¯**: æµ‹è¯•åŸç”Ÿ API é€ä¼ åŠŸèƒ½
3. **Schema é›†æˆéªŒè¯**: æµ‹è¯•åŸºäº schema çš„è‡ªåŠ¨é…ç½®ç”Ÿæˆ
4. **ç±»å‹å®‰å…¨éªŒè¯**: ç¡®ä¿æ‰€æœ‰ TypeScript ç±»å‹æ­£ç¡®
5. **å‘åå…¼å®¹éªŒè¯**: ç¡®ä¿ç°æœ‰ä»£ç ä¸å—å½±å“

## ğŸ“‹ é‡Œç¨‹ç¢‘å’ŒéªŒæ”¶æ ‡å‡†

### é‡Œç¨‹ç¢‘ 1: å›½é™…åŒ–æ”¯æŒå®Œæˆ
- [ ] æ‰€æœ‰ UI ç»„ä»¶æ”¯æŒå¤šè¯­è¨€
- [ ] æä¾›å®Œæ•´çš„ä¸­è‹±æ–‡è¯­è¨€åŒ…
- [ ] ä¸ auth-core çš„ i18n ç³»ç»Ÿä¿æŒä¸€è‡´

### é‡Œç¨‹ç¢‘ 2: å°è£…ç­–ç•¥ä¼˜åŒ–å®Œæˆ
- [ ] æ‰€æœ‰ç¬¬ä¸‰æ–¹ç»„ä»¶ä¿ç•™åŸç”Ÿ API è®¿é—®
- [ ] æä¾› `...props` é€ä¼ æœºåˆ¶
- [ ] æ–‡æ¡£è¯´æ˜é«˜çº§ç”¨æ³•

### é‡Œç¨‹ç¢‘ 3: Schema é›†æˆå®Œæˆ
- [ ] DataTable æ”¯æŒåŸºäº schema çš„åˆ—é…ç½®
- [ ] FormBuilder æ”¯æŒ schema é©±åŠ¨çš„å­—æ®µç”Ÿæˆ
- [ ] æä¾›å®Œæ•´çš„ç±»å‹å®‰å…¨ä¿éšœ

### æœ€ç»ˆéªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰æµ‹è¯•å‘½ä»¤é€šè¿‡
- [ ] åŠŸèƒ½æ¼”ç¤ºé¡µé¢æ­£å¸¸å·¥ä½œ
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] å‘åå…¼å®¹æ€§ä¿æŒ
- [ ] æ€§èƒ½æ— æ˜æ˜¾ä¸‹é™

## ğŸš¨ æ³¨æ„äº‹é¡¹

1. **åŒ…é‡å‘½åè¯„ä¼°**: è€ƒè™‘å°† `auth-core` é‡å‘½åä¸º `auth`
2. **æ•´ä½“æ¶æ„è§‚å¯Ÿ**: ä¿®æ”¹ä»»ä½•åŒ…æ—¶å¿…é¡»åˆ†æå¯¹å…¶ä»–åŒ…çš„å½±å“
3. **æ¸è¿›å¼æ”¹è¿›**: ä¼˜å…ˆä¿è¯ç°æœ‰åŠŸèƒ½ä¸å—å½±å“
4. **æ–‡æ¡£åŒæ­¥**: æ¯ä¸ªæ”¹è¿›éƒ½è¦åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£
