# Linch Kit å¼€å‘äº¤æ¥æ–‡æ¡£

**æ—¥æœŸ**: 2025-06-19  
**ä¼šè¯ç±»å‹**: CLI ç³»ç»Ÿä¿®å¤å’Œ Starter åº”ç”¨éªŒè¯  
**çŠ¶æ€**: éƒ¨åˆ†å®Œæˆï¼Œéœ€è¦ç»§ç»­

## ğŸ“‹ å½“å‰ä»»åŠ¡æ¦‚è¿°

ç”¨æˆ·è¦æ±‚ï¼š
1. é‡æ–°æ•´ç† ai-context å’Œ docsï¼Œæ›´æ–° augment memories
2. ç»§ç»­å¤„ç† starter é‡Œé¢ä½¿ç”¨ packages/ ä¸‹é¢çš„ auth-core, core, schema ç­‰å®ŒæˆåŠŸèƒ½éªŒè¯
3. é€šè¿‡ç”¨æˆ·ç®¡ç†ã€ç™»å½•æ³¨å†Œç­‰åŠŸèƒ½éªŒè¯åŒ…çš„é›†æˆï¼ŒåŒ…æ‹¬ CLI å·¥å…·ã€å®Œæ•´çš„å¸¦æ•°æ®åº“çš„ç”¨æˆ·æ³¨å†Œç™»å½•é€»è¾‘ç­‰

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. CLI ç³»ç»Ÿä¿®å¤
- **é—®é¢˜**: CLI å‘½ä»¤é‡å¤æ³¨å†Œã€TypeScript æ–‡ä»¶åŠ è½½å¤±è´¥ã€schema å‘½ä»¤é›†æˆé—®é¢˜
- **è§£å†³æ–¹æ¡ˆ**: 
  - ä¿®å¤äº† `CommandRegistry` çš„é‡å¤æ³¨å†Œé€»è¾‘ï¼Œæ”¹ä¸ºè·³è¿‡å·²æ³¨å†Œå‘½ä»¤
  - ä¿®å¤äº†æ’ä»¶åŠ è½½å™¨çš„åŒ…è¯†åˆ«é€»è¾‘ï¼Œé¿å…åŠ è½½é CLI æ’ä»¶åŒ…ï¼ˆå¦‚ UI åŒ…ï¼‰
  - ä¸º schema åŒ…åˆ›å»ºäº†ä¸“é—¨çš„ CLI æ’ä»¶ (`packages/schema/src/plugins/cli-plugin.ts`)

### 2. Schema CLI æ’ä»¶é›†æˆ
- **åˆ›å»º**: `packages/schema/src/plugins/cli-plugin.ts` - å®ç°äº† CommandPlugin æ¥å£
- **å‘½ä»¤æ ¼å¼ä¿®æ”¹**: å°† `schema:generate:prisma` æ”¹ä¸º `schema-generate-prisma` æ ¼å¼
- **é…ç½®**: æ›´æ–°äº† package.json å¯¼å‡ºå’Œæ„å»ºé…ç½®
- **ä¾èµ–**: æ·»åŠ äº† @linch-kit/core ä½œä¸º devDependency

### 3. é¡¹ç›®æ–‡æ¡£æ•´ç†
- **æ›´æ–°**: `ai-context/project-overview.md` - åæ˜ å½“å‰é¡¹ç›®çŠ¶æ€å’Œè¿›å±•
- **æ›´æ–°**: `ai-context/progress/current-status.md` - å½“å‰å¼€å‘çŠ¶æ€å’Œä¸‹ä¸€æ­¥è®¡åˆ’
- **æ›´æ–°**: Augment memories - è®°å½•äº†å½“å‰é¡¹ç›®çŠ¶æ€å’Œä»»åŠ¡é‡ç‚¹

### 4. Starter åº”ç”¨å‡†å¤‡
- **CLI è„šæœ¬**: åˆ›å»ºäº† `apps/starter/scripts/linch.js` ä½œä¸º CLI å…¥å£
- **æ•°æ®åº“**: æ‰‹åŠ¨åˆ›å»ºäº† Prisma schema å’Œæ•°æ®åº“è¿æ¥æ–‡ä»¶
- **ç”¨æˆ·æœåŠ¡**: åˆ›å»ºäº†åŸºç¡€çš„ç”¨æˆ·æœåŠ¡ç±» (`apps/starter/app/_lib/services/user.ts`)

## ğŸš§ æœªå®Œæˆçš„å·¥ä½œ

### 1. CLI å‘½ä»¤æ ¼å¼ç»Ÿä¸€ (é«˜ä¼˜å…ˆçº§)
**é—®é¢˜**: ç”¨æˆ·è¦æ±‚ä¿®æ”¹å‘½ä»¤æ ¼å¼ï¼Œä¸èƒ½ç”¨ `schema:generate:prisma` è¿™ç§æ ¼å¼
**éœ€è¦åšçš„**:
- å°†æ‰€æœ‰ schema å‘½ä»¤æ”¹ä¸º `schema-xxx` æ ¼å¼ (éƒ¨åˆ†å®Œæˆ)
- ç¡®ä¿å‘½ä»¤èƒ½æ­£ç¡®æ‰§è¡Œå’Œè§£æ

### 2. é…ç½®æ–‡ä»¶ç»Ÿä¸€ (é«˜ä¼˜å…ˆçº§)
**é—®é¢˜**: ç”¨æˆ·è¦æ±‚å°† linch-schema.config å…¨éƒ¨åˆå¹¶åˆ° linch.config.ts
**å½“å‰çŠ¶æ€**: 
- `apps/starter/linch.config.ts` å·²å­˜åœ¨å¹¶åŒ…å« schema é…ç½®
- æ—§çš„ `linch-schema.config.js` å·²åˆ é™¤
**éœ€è¦åšçš„**:
- ä¿®æ”¹ schema CLI æ’ä»¶ä¸­çš„é…ç½®åŠ è½½é€»è¾‘ï¼Œä» linch.config.ts è¯»å– schema é…ç½®
- ç¡®ä¿æ‰€æœ‰ schema å‘½ä»¤éƒ½ä½¿ç”¨ç»Ÿä¸€é…ç½®

### 3. Plugin-list å‘½ä»¤ä¿®å¤ (ä¸­ä¼˜å…ˆçº§)
**é—®é¢˜**: `linch plugin-list` å‘½ä»¤æ— æ³•æ­£ç¡®æ‰§è¡Œ
**ç°è±¡**: æ˜¾ç¤º "Unknown command: plugin-list"
**å¯èƒ½åŸå› **: æ’ä»¶åŠ è½½æˆ–å‘½ä»¤æ³¨å†Œæœ‰é—®é¢˜
**éœ€è¦è°ƒè¯•**: æ’ä»¶å‘ç°å’ŒåŠ è½½æµç¨‹

### 4. Schema å®ä½“åŠ è½½ (ä¸­ä¼˜å…ˆçº§)
**é—®é¢˜**: `linch schema-list` æ˜¾ç¤º "Total: 0 entities"
**åŸå› **: ç”¨æˆ·å®ä½“æ–‡ä»¶ (`apps/starter/app/_lib/schemas/user.ts`) æ²¡æœ‰è¢«æ­£ç¡®åŠ è½½
**éœ€è¦åšçš„**:
- ç¡®ä¿å®ä½“æ–‡ä»¶è·¯å¾„é…ç½®æ­£ç¡®
- éªŒè¯ TypeScript æ–‡ä»¶åŠ¨æ€åŠ è½½æœºåˆ¶

### 5. å®Œæ•´çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½éªŒè¯ (æœ€ç»ˆç›®æ ‡)
**éœ€è¦å®ç°**:
- ä½¿ç”¨ @linch-kit/auth-core çš„è®¤è¯åŠŸèƒ½
- ä½¿ç”¨ @linch-kit/schema ç”Ÿæˆçš„ Prisma schema
- å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œ/ç™»å½•æµç¨‹
- æ•°æ®åº“ CRUD æ“ä½œéªŒè¯
- tRPC API é›†æˆ

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚å’Œæ³¨æ„äº‹é¡¹

### CLI ç³»ç»Ÿæ¶æ„
- **æ ¸å¿ƒ**: `packages/core/src/cli/` - ç»Ÿä¸€çš„ CLI ç³»ç»Ÿ
- **æ’ä»¶åŠ è½½**: `packages/core/src/cli/core/plugin-loader.ts` - è‡ªåŠ¨å‘ç°å’ŒåŠ è½½æ’ä»¶
- **å‘½ä»¤æ³¨å†Œ**: `packages/core/src/cli/core/command-registry.ts` - å‘½ä»¤æ³¨å†Œè¡¨

### å·²çŸ¥é—®é¢˜
1. **TypeScript æ¨¡å—åŠ è½½**: æ’ä»¶åŠ è½½å™¨åœ¨åŠ è½½ TypeScript æ–‡ä»¶æ—¶å¯èƒ½æœ‰é—®é¢˜
2. **å‘½ä»¤è§£æ**: å¤æ‚çš„å‘½ä»¤æ ¼å¼ï¼ˆå¦‚ `schema:generate:prisma`ï¼‰è§£ææœ‰é—®é¢˜
3. **é…ç½®åŠ è½½**: éœ€è¦ç»Ÿä¸€ä» linch.config.ts åŠ è½½æ‰€æœ‰é…ç½®

### æ–‡ä»¶ä½ç½®
- **CLI å…¥å£**: `apps/starter/scripts/linch.js`
- **Schema CLI æ’ä»¶**: `packages/schema/src/plugins/cli-plugin.ts`
- **ç”¨æˆ·å®ä½“**: `apps/starter/app/_lib/schemas/user.ts`
- **ç»Ÿä¸€é…ç½®**: `apps/starter/linch.config.ts`
- **Prisma Schema**: `apps/starter/prisma/schema.prisma`

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œ (ç¬¬ä¸€ä¼˜å…ˆçº§)
1. **ä¿®å¤ plugin-list å‘½ä»¤** - è°ƒè¯•ä¸ºä»€ä¹ˆå‘½ä»¤æ— æ³•æ‰§è¡Œ
2. **å®Œæˆé…ç½®æ–‡ä»¶ç»Ÿä¸€** - è®© schema å‘½ä»¤ä» linch.config.ts è¯»å–é…ç½®
3. **éªŒè¯ schema å‘½ä»¤** - ç¡®ä¿ `linch schema-generate-prisma` ç­‰å‘½ä»¤èƒ½æ­£å¸¸å·¥ä½œ

### åç»­æ‰§è¡Œ
1. **å®ä½“åŠ è½½éªŒè¯** - ç¡®ä¿ç”¨æˆ·å®ä½“èƒ½è¢«æ­£ç¡®å‘ç°å’ŒåŠ è½½
2. **æ•°æ®åº“é›†æˆ** - éªŒè¯ Prisma ç”Ÿæˆå’Œæ•°æ®åº“æ“ä½œ
3. **å®Œæ•´åŠŸèƒ½éªŒè¯** - å®ç°ç«¯åˆ°ç«¯çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½

## ğŸ“ è°ƒè¯•å»ºè®®

### è°ƒè¯• CLI é—®é¢˜
```bash
# æµ‹è¯•åŸºæœ¬ CLI åŠŸèƒ½
cd apps/starter
pnpm linch --help

# æµ‹è¯•æ’ä»¶åˆ—è¡¨
pnpm linch plugin-list

# æµ‹è¯• schema å‘½ä»¤
pnpm linch schema-list
pnpm linch schema-generate-prisma
```

### æ£€æŸ¥æ’ä»¶åŠ è½½
- æŸ¥çœ‹ `packages/core/src/cli/core/plugin-loader.ts` çš„æ—¥å¿—è¾“å‡º
- ç¡®è®¤ schema åŒ…æ˜¯å¦è¢«æ­£ç¡®è¯†åˆ«ä¸ºæ’ä»¶
- éªŒè¯æ’ä»¶å…¥å£ç‚¹è§£ææ˜¯å¦æ­£ç¡®

### éªŒè¯é…ç½®åŠ è½½
- ç¡®è®¤ `apps/starter/linch.config.ts` ä¸­çš„ schema é…ç½®
- æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦èƒ½è¢«æ­£ç¡®è¯»å–å’Œè§£æ

## ğŸ”„ ç»§ç»­å·¥ä½œçš„ä¸Šä¸‹æ–‡

è¿™ä¸ªä¼šè¯çš„ä¸»è¦ç›®æ ‡æ˜¯éªŒè¯ Linch Kit æ¡†æ¶çš„å„ä¸ªåŒ…èƒ½å¤Ÿæ­£ç¡®é›†æˆå’Œå·¥ä½œã€‚ç”¨æˆ·å¼ºè°ƒè¦ä½¿ç”¨ç°æœ‰åŒ…çš„åŠŸèƒ½è€Œä¸æ˜¯é‡æ–°å®ç°ï¼Œè¿™æ˜¯æ¡†æ¶çš„æ ¸å¿ƒä»·å€¼ã€‚

å½“å‰æœ€é‡è¦çš„æ˜¯è®© CLI ç³»ç»Ÿå®Œå…¨æ­£å¸¸å·¥ä½œï¼Œç„¶åé€šè¿‡å®é™…çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½æ¥éªŒè¯æ•´ä¸ªæŠ€æœ¯æ ˆçš„é›†æˆã€‚
