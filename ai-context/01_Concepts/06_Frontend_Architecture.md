# å‰ç«¯åº”ç”¨æ¶æ„è®¾è®¡

## ğŸ¯ åº”ç”¨æ¶æ„åŸåˆ™

### 1. åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åº”ç”¨å±‚ (apps/)                           â”‚
â”‚ â”œâ”€ starter (ä¼ä¸šçº§åº”ç”¨å¤–å£³)              â”‚
â”‚ â”œâ”€ website (æ–‡æ¡£å¹³å°)                    â”‚
â”‚ â””â”€ demo-app (åŠŸèƒ½æ¼”ç¤º)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åŠŸèƒ½æ¨¡å—å±‚ (modules/)                   â”‚
â”‚ â”œâ”€ console (ç®¡ç†åå°åŠŸèƒ½)               â”‚
â”‚ â””â”€ [å…¶ä»–ä¸šåŠ¡æ¨¡å—]                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ç»„ä»¶åº“å±‚ (@linch-kit/ui)                â”‚
â”‚ â”œâ”€ åŸºç¡€ç»„ä»¶ (shadcn/ui)                 â”‚
â”‚ â”œâ”€ ä¸šåŠ¡ç»„ä»¶                             â”‚
â”‚ â””â”€ å¸ƒå±€ç»„ä»¶                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ ¸å¿ƒåŒ…å±‚ (core/schema/auth/crud/trpc)   â”‚
â”‚ â”œâ”€ ç±»å‹å®šä¹‰                             â”‚
â”‚ â”œâ”€ ä¸šåŠ¡é€»è¾‘                             â”‚
â”‚ â””â”€ åŸºç¡€æœåŠ¡                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. èŒè´£åˆ†ç¦»

- **apps/starter** - ä¼ä¸šçº§åº”ç”¨å¤–å£³ï¼Œæä¾›å¤šæ ‡ç­¾é¡µå·¥ä½œåŒº
- **modules/console** - ç®¡ç†åŠŸèƒ½æ¨¡å—ï¼Œæä¾›é¡µé¢å’Œç»„ä»¶
- **@linch-kit/ui** - å¯å¤ç”¨çš„ UI ç»„ä»¶åº“

## ğŸ“± starter åº”ç”¨æ¶æ„

### è®¾è®¡ç›®æ ‡

- æä¾›ç±»ä¼¼ VSCode çš„å¤šæ ‡ç­¾é¡µå·¥ä½œåŒºä½“éªŒ
- æ”¯æŒå¤šæ¨¡å—é›†æˆçš„ä¼ä¸šçº§åº”ç”¨æ¡†æ¶
- ç»Ÿä¸€çš„å¯¼èˆªã€çŠ¶æ€ç®¡ç†å’Œç”¨æˆ·ä½“éªŒ

### æ ¸å¿ƒç‰¹æ€§éœ€æ±‚

1. **å¤šæ ‡ç­¾é¡µå·¥ä½œåŒº** - åŒæ—¶æ‰“å¼€å¤šä¸ªé¡µé¢ï¼Œå¿«é€Ÿåˆ‡æ¢
2. **æ’ä»¶åŒ–è·¯ç”±** - æ¨¡å—å¯ä»¥æ³¨å†Œè‡ªå·±çš„è·¯ç”±å’Œæ ‡ç­¾é¡µ
3. **ç»Ÿä¸€çŠ¶æ€ç®¡ç†** - è·¨æ ‡ç­¾é¡µçš„çŠ¶æ€åŒæ­¥
4. **å“åº”å¼å¸ƒå±€** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸

### æŠ€æœ¯é€‰å‹æ ‡å‡†

- **çŠ¶æ€ç®¡ç†**: Zustand (è½»é‡ã€ç±»å‹å®‰å…¨)
- **è·¯ç”±ç³»ç»Ÿ**: Next.js 15 App Router + å¹¶è¡Œè·¯ç”±
- **UIç»„ä»¶**: @linch-kit/ui + shadcn/ui
- **æ ·å¼æ–¹æ¡ˆ**: Tailwind CSS 4 + CSSå˜é‡

## ğŸ—ï¸ è®¾è®¡æ–‡æ¡£è¦æ±‚

### æ–°åŠŸèƒ½å¼€å‘å‰å¿…é¡»æœ‰ DESIGN.md

æ¯ä¸ªåº”ç”¨å’Œæ¨¡å—å¿…é¡»åœ¨å¼€å‘å‰åˆ›å»ºè¯¦ç»†çš„è®¾è®¡æ–‡æ¡£ï¼š

#### åº”ç”¨çº§è®¾è®¡æ–‡æ¡£ (apps/\*/DESIGN.md)

- **ç”¨æˆ·ä½“éªŒè®¾è®¡** - äº¤äº’æµç¨‹ã€è§†è§‰è®¾è®¡
- **æ¶æ„è®¾è®¡** - ç»„ä»¶å±‚æ¬¡ã€çŠ¶æ€ç®¡ç†ã€è·¯ç”±è®¾è®¡
- **é›†æˆæ–¹æ¡ˆ** - ä¸å…¶ä»–æ¨¡å—çš„é›†æˆæ–¹å¼
- **æ€§èƒ½è€ƒé‡** - åŠ è½½ç­–ç•¥ã€ç¼“å­˜ç­–ç•¥

#### æ¨¡å—çº§è®¾è®¡æ–‡æ¡£ (modules/\*/DESIGN.md)

- **åŠŸèƒ½è§„èŒƒ** - æä¾›çš„åŠŸèƒ½å’Œæ¥å£
- **ç»„ä»¶è®¾è®¡** - ç»„ä»¶å±‚æ¬¡å’Œæ¥å£å®šä¹‰
- **æ•°æ®æµè®¾è®¡** - çŠ¶æ€ç®¡ç†å’Œæ•°æ®æµè½¬
- **é›†æˆæ¥å£** - ä¸å¤–éƒ¨ç³»ç»Ÿçš„é›†æˆæ–¹å¼

### è®¾è®¡åå•†æµç¨‹

1. **ç°çŠ¶åˆ†æ** - åˆ†æç°æœ‰ä»£ç ç»“æ„å’Œéœ€æ±‚
2. **æŠ€æœ¯è°ƒç ”** - æŸ¥é˜…ç›¸å…³æ–‡æ¡£å’Œæœ€ä½³å®è·µ
3. **Geminiåå•†** - ä¸ Gemini åå•†æ¶æ„æ–¹æ¡ˆ
4. **è®¾è®¡ç”Ÿæˆ** - ç”Ÿæˆè¯¦ç»†è®¾è®¡æ–‡æ¡£
5. **ç”¨æˆ·ç¡®è®¤** - è·å¾—ç”¨æˆ·ç¡®è®¤åå¼€å§‹å¼€å‘

## ğŸ¨ ç”¨æˆ·ä½“éªŒè®¾è®¡æ ‡å‡†

### å¤šæ ‡ç­¾é¡µå·¥ä½œåŒºè®¾è®¡

- **æ ‡ç­¾é¡µç®¡ç†** - åˆ›å»ºã€å…³é—­ã€åˆ‡æ¢ã€æ’åº
- **çŠ¶æ€æŒä¹…åŒ–** - åˆ·æ–°åæ¢å¤æ ‡ç­¾é¡µçŠ¶æ€
- **æ€§èƒ½ä¼˜åŒ–** - æ‡’åŠ è½½ã€è™šæ‹ŸåŒ–ã€å†…å­˜ç®¡ç†
- **äº¤äº’ä½“éªŒ** - æ‹–æ‹½ã€å³é”®èœå•ã€å¿«æ·é”®

### å“åº”å¼è®¾è®¡

- **æ¡Œé¢ç«¯** - å®Œæ•´çš„å¤šæ ‡ç­¾é¡µä½“éªŒ
- **å¹³æ¿ç«¯** - é€‚é…è§¦æ‘¸æ“ä½œ
- **ç§»åŠ¨ç«¯** - ç®€åŒ–çš„å•é¡µé¢ä½“éªŒ

## ğŸ”§ å¼€å‘å·¥å…·é“¾

### å¿…é¡»ä½¿ç”¨çš„å·¥å…·

- **åŒ…ç®¡ç†**: bun
- **ç±»å‹æ£€æŸ¥**: TypeScript ä¸¥æ ¼æ¨¡å¼
- **ä»£ç è§„èŒƒ**: ESLint + Prettier
- **æ„å»ºå·¥å…·**: Next.js 15 + Turbo

### è´¨é‡æ ‡å‡†

- **ç±»å‹è¦†ç›–**: 100% TypeScript
- **æµ‹è¯•è¦†ç›–**: åº”ç”¨çº§ >70%, ç»„ä»¶çº§ >80%
- **æ€§èƒ½æŒ‡æ ‡**: é¦–å±åŠ è½½ <2s, æ ‡ç­¾é¡µåˆ‡æ¢ <200ms
- **å…¼å®¹æ€§**: æ”¯æŒç°ä»£æµè§ˆå™¨ (Chrome/Firefox/Safari/Edge)

## ğŸ† starter-console é›†æˆå®ç°æ¡ˆä¾‹

### å®ç°æ¦‚è¿° (2025-07-05)

æˆåŠŸå®ç°äº†å°† `@linch-kit/console` ç®¡ç†åŠŸèƒ½é›†æˆåˆ° `starter` åº”ç”¨çš„ç»Ÿä¸€ `/dashboard` å¸ƒå±€æ¶æ„ä¸­ã€‚

### æ ¸å¿ƒæ¶æ„è®¾è®¡

#### 1. ç»Ÿä¸€ `/dashboard` å¸ƒå±€æ¶æ„

- **è®¾è®¡ç†å¿µ**: ç»Ÿä¸€å·¥ä½œå°ä½“éªŒï¼ŒåŸºäºæƒé™çš„åŠ¨æ€å¯¼èˆª
- **è·¯ç”±ç»“æ„**: åµŒå¥—å¸ƒå±€ `/dashboard` -> `/dashboard/admin/*`
- **æƒé™æ§åˆ¶**: åŸºäº NextAuth.js å’Œè§’è‰²çš„åŠ¨æ€èœå•ç”Ÿæˆ

#### 2. åµŒå¥—å¸ƒå±€å®ç°

```
app/
â””â”€â”€ dashboard/
    â”œâ”€â”€ layout.tsx              # ä¸»å·¥ä½œå°å¸ƒå±€
    â”œâ”€â”€ page.tsx                # é»˜è®¤ä»ªè¡¨ç›˜é¡µé¢
    â””â”€â”€ admin/                  # ç®¡ç†åŠŸèƒ½æ¨¡å—
        â”œâ”€â”€ layout.tsx          # ç®¡ç†åŒºæƒé™ä¿æŠ¤å¸ƒå±€
        â”œâ”€â”€ page.tsx            # ç®¡ç†æ¦‚è§ˆé¡µ
        â”œâ”€â”€ users/page.tsx      # ç”¨æˆ·ç®¡ç†
        â”œâ”€â”€ tenants/page.tsx    # ç§Ÿæˆ·ç®¡ç†
        â””â”€â”€ settings/page.tsx   # ç³»ç»Ÿè®¾ç½®
```

#### 3. æƒé™é©±åŠ¨çš„å¯¼èˆªè®¾è®¡

```typescript
// components/layout/AppSidebar.tsx
function getNavItems(userRole: string | undefined): NavItem[] {
  const isAdmin = userRole === 'SUPER_ADMIN' || userRole === 'TENANT_ADMIN'

  const baseItems: NavItem[] = [
    { label: 'Overview', href: '/dashboard', icon: Home },
    { label: 'Settings', href: '/dashboard/settings', icon: Settings },
  ]

  // ç®¡ç†åŠŸèƒ½ - ä»…ç®¡ç†å‘˜å¯è§
  if (isAdmin) {
    baseItems.splice(1, 0, {
      label: 'Admin',
      href: '/dashboard/admin',
      icon: Shield,
      children: [
        { label: 'Overview', href: '/dashboard/admin', icon: Home },
        { label: 'Users', href: '/dashboard/admin/users', icon: Users },
        { label: 'Tenants', href: '/dashboard/admin/tenants', icon: Building },
        { label: 'System Settings', href: '/dashboard/admin/settings', icon: Settings },
      ],
    })
  }
  return baseItems
}
```

#### 4. æƒé™ä¿æŠ¤ä¸­é—´ä»¶

```typescript
// app/dashboard/admin/layout.tsx
export default async function AdminLayout({ children }: { children: React.ReactNode }) {
  const session = await auth()

  if (!session) {
    redirect('/sign-in?redirect=/dashboard/admin')
  }

  const hasAdminAccess = (session.user as { role?: string })?.role === 'SUPER_ADMIN' ||
                        (session.user as { role?: string })?.role === 'TENANT_ADMIN'

  if (!hasAdminAccess) {
    redirect('/dashboard')
  }

  return <AppSidebarLayout>{children}</AppSidebarLayout>
}
```

### æŠ€æœ¯ç‰¹æ€§

#### 1. å“åº”å¼å¤šæ ‡ç­¾é¡µå·¥ä½œåŒº

- **æ¡Œé¢ç«¯**: å®Œæ•´çš„å¤šæ ‡ç­¾é¡µä½“éªŒï¼Œæ”¯æŒåŒæ—¶æ‰“å¼€å¤šä¸ªåŠŸèƒ½é¡µé¢
- **ç§»åŠ¨ç«¯**: ä¼ ç»Ÿé¢åŒ…å±‘å¯¼èˆªï¼ŒèŠ‚çœç©ºé—´
- **æ™ºèƒ½åˆ‡æ¢**: æ ¹æ®è®¾å¤‡å°ºå¯¸å’Œæ ‡ç­¾æ•°é‡è‡ªåŠ¨é€‰æ‹©æœ€ä½³å¯¼èˆªæ¨¡å¼

#### 2. Console ç»„ä»¶é›†æˆç­–ç•¥

- **å ä½ç¬¦å®ç°**: å½“å‰ä½¿ç”¨å ä½ç¬¦é¡µé¢ï¼Œä¸ºæœªæ¥Consoleç»„ä»¶åšå‡†å¤‡
- **æ ‡å‡†UIç»„ä»¶**: ä½¿ç”¨ `@linch-kit/ui` çš„ SchemaTableã€SchemaForm ç­‰ç»„ä»¶
- **ä¸€è‡´æ€§è®¾è®¡**: ä¿æŒä¸æ•´ä½“åº”ç”¨çš„è§†è§‰å’Œäº¤äº’ä¸€è‡´æ€§

#### 3. è§’è‰²æƒé™æ˜ å°„

| è§’è‰²           | è®¿é—®æƒé™                                                           | ç®¡ç†åŠŸèƒ½             |
| -------------- | ------------------------------------------------------------------ | -------------------- |
| `USER`         | `/dashboard/*`, `/dashboard/settings/*`                            | åŸºç¡€åŠŸèƒ½ã€ä¸ªäººè®¾ç½®   |
| `TENANT_ADMIN` | `USER` + `/dashboard/admin/users/*`, `/dashboard/admin/settings/*` | ç”¨æˆ·ç®¡ç†ã€ç§Ÿæˆ·è®¾ç½®   |
| `SUPER_ADMIN`  | å…¨éƒ¨æƒé™                                                           | ç³»ç»Ÿç®¡ç†ã€å¤šç§Ÿæˆ·ç®¡ç† |

### å®æ–½æˆæœ

#### âœ… å·²å®Œæˆ

- [x] åµŒå¥—å¸ƒå±€ç»“æ„å®ç°
- [x] æƒé™é©±åŠ¨çš„åŠ¨æ€å¯¼èˆª
- [x] ç®¡ç†é¡µé¢å ä½ç¬¦å®ç°
- [x] å“åº”å¼å¤šæ ‡ç­¾é¡µå·¥ä½œåŒº
- [x] è§’è‰²æƒé™æ§åˆ¶ç³»ç»Ÿ
- [x] æ„å»ºéªŒè¯é€šè¿‡

#### ğŸ”„ å¾…å®Œå–„ (åç»­è¿­ä»£)

- [ ] Console ç»„ä»¶å®Œå–„åçš„å®Œæ•´é›†æˆ
- [ ] çœŸå®æ•°æ®çš„ç®¡ç†åŠŸèƒ½å®ç°
- [ ] é«˜çº§æƒé™æ§åˆ¶ï¼ˆCASLç»†ç²’åº¦æƒé™ï¼‰
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œç¼“å­˜ç­–ç•¥

### æ¶æ„å†³ç­–è®°å½•

#### 1. ä¸ºä»€ä¹ˆé€‰æ‹©ç»Ÿä¸€ `/dashboard` å¸ƒå±€ï¼Ÿ

- **ç”¨æˆ·ä½“éªŒ**: æä¾›ä¸€è‡´çš„å·¥ä½œå°ä½“éªŒï¼Œå‡å°‘è®¤çŸ¥è´Ÿæ‹…
- **æƒé™ç®¡ç†**: é›†ä¸­çš„æƒé™æ§åˆ¶ï¼Œæ˜“äºç»´æŠ¤
- **æ‰©å±•æ€§**: æ–°åŠŸèƒ½æ¨¡å—å¯ä»¥è½»æ¾é›†æˆåˆ°ç»Ÿä¸€å¸ƒå±€ä¸­

#### 2. ä¸ºä»€ä¹ˆé‡‡ç”¨å ä½ç¬¦ç­–ç•¥ï¼Ÿ

- **å‰ç»è®¾è®¡**: Console åŒ…å°šåœ¨å¼€å‘ä¸­ï¼Œå ä½ç¬¦ç¡®ä¿æ¶æ„å®Œæ•´æ€§
- **æ¸è¿›å¼é›†æˆ**: å¯ä»¥åœ¨Consoleç»„ä»¶å®Œå–„åæ— ç¼æ›¿æ¢
- **ä¿æŒç®€æ´**: ç¬¦åˆstarteråº”ç”¨ç®€æ´çš„è®¾è®¡åŸåˆ™

#### 3. ä¸ºä»€ä¹ˆä½¿ç”¨åµŒå¥—å¸ƒå±€è€Œéå¹³çº§è·¯ç”±ï¼Ÿ

- **æƒé™åˆ†å±‚**: ç®¡ç†åŠŸèƒ½éœ€è¦é¢å¤–çš„æƒé™æ£€æŸ¥å±‚
- **å¸ƒå±€å¤ç”¨**: adminåŒºåŸŸå…±äº«ç‰¹å®šçš„å¸ƒå±€å’Œæ ·å¼
- **ä»£ç ç»„ç»‡**: æ›´æ¸…æ™°çš„ä»£ç ç»“æ„å’ŒèŒè´£åˆ†ç¦»

### æœ€ä½³å®è·µæ€»ç»“

1. **æƒé™ä¼˜å…ˆ**: æ‰€æœ‰ç®¡ç†åŠŸèƒ½éƒ½å¿…é¡»é€šè¿‡æƒé™æ£€æŸ¥
2. **æ¸è¿›å¢å¼º**: ä»ç®€å•å ä½ç¬¦å¼€å§‹ï¼Œé€æ­¥å®Œå–„åŠŸèƒ½
3. **ç»„ä»¶å¤ç”¨**: å……åˆ†åˆ©ç”¨ `@linch-kit/ui` çš„æ ‡å‡†ç»„ä»¶
4. **ç±»å‹å®‰å…¨**: ä¸¥æ ¼çš„ TypeScript ç±»å‹æ£€æŸ¥
5. **å“åº”å¼è®¾è®¡**: è€ƒè™‘ä¸åŒè®¾å¤‡çš„ç”¨æˆ·ä½“éªŒ

## ğŸ“‹ å¼€å‘æ£€æŸ¥æ¸…å•

### è®¾è®¡é˜¶æ®µ

- [x] å­˜åœ¨å®Œæ•´çš„è®¾è®¡æ–‡æ¡£
- [x] é€šè¿‡ Gemini åå•†ç¡®è®¤æœ€ä½³å®è·µ
- [x] ç”¨æˆ·ç¡®è®¤è®¾è®¡æ–¹æ¡ˆ
- [x] æ›´æ–°ç›¸å…³æ¶æ„æ–‡æ¡£

### å¼€å‘é˜¶æ®µ

- [x] ä¸¥æ ¼æŒ‰ç…§è®¾è®¡æ–‡æ¡£å®ç°
- [x] ä½¿ç”¨ LinchKit å†…éƒ¨åŒ…åŠŸèƒ½
- [x] éµå¾ªä»£ç è§„èŒƒå’Œç±»å‹çº¦æŸ
- [x] å®æ—¶æ›´æ–° TODO ä»»åŠ¡çŠ¶æ€

### éªŒè¯é˜¶æ®µ

- [x] é€šè¿‡æ‰€æœ‰ç±»å‹æ£€æŸ¥
- [x] é€šè¿‡æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹
- [x] æ»¡è¶³æ€§èƒ½æ ‡å‡†
- [x] ç”¨æˆ·ä½“éªŒéªŒè¯é€šè¿‡

è¿™ä¸ªæ¶æ„æ–‡æ¡£ç¡®ä¿äº†å‰ç«¯åº”ç”¨çš„è®¾è®¡è´¨é‡å’Œå¼€å‘æ•ˆç‡ï¼Œä¸ºä¼ä¸šçº§åº”ç”¨æä¾›äº†æ¸…æ™°çš„æŒ‡å¯¼åŸåˆ™ã€‚
