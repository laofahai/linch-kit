# LinchKit ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

**ç‰ˆæœ¬**: v7.2  
**æ›´æ–°**: 2025-07-07  
**çŠ¶æ€**: å®Œæ•´çš„ (6+1) ç³»ç»Ÿæ¶æ„æ–‡æ¡£

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ„åŸåˆ™

### è®¾è®¡å“²å­¦

- **ç¨³å®šä¼˜å…ˆ**: åŸºäºç°æœ‰ 6+1 æ¶æ„æ‰©å±•ï¼Œä¿æŒæ¶æ„ç¨³å®šæ€§
- **èŒè´£æ˜ç¡®**: æ¯ä¸ªåŒ…çš„æ‰©å±•éƒ½åœ¨å…¶èŒè´£èŒƒå›´å†…
- **å‘åå…¼å®¹**: ç°æœ‰åŠŸèƒ½ä¸å—å½±å“ï¼Œå¹³æ»‘æ¼”è¿›
- **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®æ§åˆ¶æ–°åŠŸèƒ½å¯ç”¨
- **AI å‹å¥½**: æ¶æ„è®¾è®¡ä¾¿äº AI ç†è§£å’Œæ“ä½œ

### ä¾èµ–å±‚æ¬¡å…³ç³»

```
L0: @linch-kit/core      â†’ åŸºç¡€è®¾æ–½ (æ—¥å¿—ã€é…ç½®ã€æ’ä»¶ç³»ç»Ÿã€Extensionç³»ç»Ÿ)
  â†“
L1: @linch-kit/auth      â†’ è®¤è¯æƒé™ (NextAuth + CASL)
  â†“
L2: @linch-kit/platform  â†’ ä¸šåŠ¡å¼€å‘å¹³å° (Schema+CRUD+tRPC+éªŒè¯)
L2: @linch-kit/ui        â†’ UIç»„ä»¶ (shadcn/ui + ä¼ä¸šç»„ä»¶)
  â†“
L3: extensions/console   â†’ ç®¡ç†å¹³å°Extension (å¤šç§Ÿæˆ·ã€æƒé™ç®¡ç†)
```

**âœ… æœ€ç»ˆåŒ…æ¶æ„**:
- **æ ¸å¿ƒ4åŒ…**: core, auth, platform, ui
- **ç§»é™¤**: packages/crud, packages/trpc (åŠŸèƒ½å·²æ•´åˆåˆ°platform)
- **å·¥å…·åŒ…**: tools/schema (å¼€å‘æ—¶ä»£ç ç”Ÿæˆå·¥å…·)

**æ ¸å¿ƒçº¦æŸ**:

- **ä¸¥æ ¼å•å‘ä¾èµ–**: ä¸Šå±‚å¯ä»¥ä¾èµ–ä¸‹å±‚ï¼Œä¸‹å±‚ä¸èƒ½ä¾èµ–ä¸Šå±‚
- **ç¦æ­¢å¾ªç¯ä¾èµ–**: ä»»ä½•åŒ…ä¹‹é—´ä¸å…è®¸å¾ªç¯ä¾èµ–
- **æœ€å°ä¾èµ–åŸåˆ™**: æ¯ä¸ªåŒ…åªä¾èµ–å¿…è¦çš„ä¸‹å±‚åŒ…

## ğŸ¯ å››å±‚æ¶æ„è®¾è®¡

### åº”ç”¨å±‚ (Applications)

```
apps/starter        # ç”Ÿäº§çº§åŸºç¡€åº”ç”¨ - Extensionè¿è¡Œæ—¶ç¯å¢ƒ
```

**âš ï¸ åº”ç”¨æ¶æ„ç®€åŒ–**:
- **ä¿ç•™**: apps/starter (æ ¸å¿ƒåº”ç”¨)
- **ç§»é™¤**: apps/demo-app, apps/website (ç®€åŒ–æ¶æ„)

**åº”ç”¨å±‚ç‰¹ç‚¹**:

- **ç‹¬ç«‹éƒ¨ç½²**: æ¯ä¸ªåº”ç”¨å¯ä»¥ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œ
- **åŠŸèƒ½é›†æˆ**: é›†æˆå¤šä¸ªæ¨¡å—å’ŒåŒ…æä¾›å®Œæ•´åŠŸèƒ½
- **ç”¨æˆ·å…¥å£**: é¢å‘æœ€ç»ˆç”¨æˆ·çš„äº¤äº’ç•Œé¢

### Extensionå±‚ (Extensions)

```
extensions/console  # ä¼ä¸šçº§ç®¡ç†æ§åˆ¶å°Extension (å·²è¿ç§»)
extensions/admin    # ç®¡ç†åŠŸèƒ½Extension (è§„åˆ’ä¸­)
extensions/blog     # åšå®¢ç³»ç»ŸExtension (å¼€å‘ä¸­)
```

**Extensionå±‚ç‰¹ç‚¹**:

- **åŠŸèƒ½åº“å®šä½**: é€šè¿‡ npm åŒ…è¢«åº”ç”¨é›†æˆä½¿ç”¨
- **ä¸šåŠ¡èšåˆ**: èšåˆå¤šä¸ªåŒ…åŠŸèƒ½å®ç°å®Œæ•´ä¸šåŠ¡æµç¨‹
- **å¯é€‰é›†æˆ**: åº”ç”¨å¯ä»¥é€‰æ‹©æ€§é›†æˆæ‰€éœ€æ¨¡å—

### åŒ…å±‚ (Packages - æ ¸å¿ƒ6åŒ…)

```
@linch-kit/core     # L0: åŸºç¡€è®¾æ–½åŒ…
@linch-kit/schema   # L1: Schemaå¼•æ“åŒ…
@linch-kit/auth     # L2: è®¤è¯æƒé™åŒ…
@linch-kit/crud     # L2: CRUDæ“ä½œåŒ…
@linch-kit/trpc     # L3: APIå±‚åŒ…
@linch-kit/ui       # L3: UIç»„ä»¶åŒ…
```

**åŒ…å±‚ç‰¹ç‚¹**:

- **åŸå­åŠŸèƒ½**: æ¯ä¸ªåŒ…æä¾›å•ä¸€é¢†åŸŸçš„åŸå­åŠŸèƒ½
- **é«˜å¤ç”¨æ€§**: å¯ä»¥è¢«æ¨¡å—å±‚å’Œåº”ç”¨å±‚å¤ç”¨
- **ç±»å‹å®‰å…¨**: å®Œæ•´çš„ TypeScript ç±»å‹æ”¯æŒ

### åŸºç¡€è®¾æ–½å±‚ (Infrastructure)

```
æ•°æ®åº“: PostgreSQL + Prisma
è®¤è¯: NextAuth.js 5.0
æƒé™: CASL (èƒ½åŠ›è®¿é—®æ§åˆ¶)
UI: Tailwind CSS 4 + shadcn/ui
AI: Neo4j çŸ¥è¯†å›¾è°± + Graph RAG
```

## ğŸ“¦ æ ¸å¿ƒåŒ…è¯¦ç»†æ¶æ„

### L0: @linch-kit/core (åŸºç¡€è®¾æ–½)

**èŒè´£**: æä¾›æ•´ä¸ªæ¡†æ¶çš„åŸºç¡€è®¾æ–½æœåŠ¡

**æ ¸å¿ƒåŠŸèƒ½**:

- **æ—¥å¿—ç³»ç»Ÿ**: åŸºäº Pino çš„ç»“æ„åŒ–æ—¥å¿—
- **é…ç½®ç®¡ç†**: ç±»å‹å®‰å…¨çš„é…ç½®ç³»ç»Ÿ
- **æ’ä»¶ç³»ç»Ÿ**: å¯æ‰©å±•çš„æ’ä»¶æ¶æ„
- **äº‹ä»¶ç³»ç»Ÿ**: ç±»å‹å®‰å…¨çš„äº‹ä»¶æ€»çº¿
- **ä¾èµ–æ³¨å…¥**: è½»é‡çº§ DI å®¹å™¨

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { logger, config, eventBus } from '@linch-kit/core'

logger.info('Application started', { version: config.app.version })
eventBus.emit('user.created', { userId: '123' })
```

### L1: @linch-kit/schema (Schemaå¼•æ“)

**èŒè´£**: Schema å®šä¹‰ã€éªŒè¯å’Œç±»å‹ç”Ÿæˆ

**æ ¸å¿ƒåŠŸèƒ½**:

- **å®ä½“å®šä¹‰**: `defineEntity()` API
- **å…³ç³»å®šä¹‰**: å®ä½“é—´å…³ç³»å»ºæ¨¡
- **ç±»å‹ç”Ÿæˆ**: è‡ªåŠ¨ç”Ÿæˆ TypeScript ç±»å‹
- **éªŒè¯è§„åˆ™**: Zod éªŒè¯é›†æˆ
- **æ•°æ®åº“é›†æˆ**: Prisma Schema ç”Ÿæˆ

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { defineEntity } from '@linch-kit/schema'

export const UserSchema = defineEntity('User', {
  id: z.string().uuid(),
  name: z.string().min(1),
  email: z.string().email(),
  role: z.enum(['USER', 'ADMIN']),
})
```

### L2: @linch-kit/auth (è®¤è¯æƒé™)

**èŒè´£**: ç”¨æˆ·è®¤è¯å’Œæƒé™ç®¡ç†

**æ ¸å¿ƒåŠŸèƒ½**:

- **è®¤è¯é›†æˆ**: NextAuth.js 5.0 é›†æˆ
- **æƒé™æ§åˆ¶**: CASL èƒ½åŠ›è®¿é—®æ§åˆ¶
- **ä¼šè¯ç®¡ç†**: ç±»å‹å®‰å…¨çš„ä¼šè¯å¤„ç†
- **å¤šç§Ÿæˆ·**: ç§Ÿæˆ·çº§åˆ«çš„æƒé™éš”ç¦»
- **è§’è‰²ç®¡ç†**: RBAC è§’è‰²æƒé™æ¨¡å‹

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { requireAuth, can } from '@linch-kit/auth'

const user = await requireAuth(request)
if (can(user, 'read', 'User')) {
  // ç”¨æˆ·æœ‰è¯»å–ç”¨æˆ·çš„æƒé™
}
```

### L2: @linch-kit/crud (CRUDæ“ä½œ)

**èŒè´£**: é€šç”¨çš„å¢åˆ æ”¹æŸ¥æ“ä½œ

**æ ¸å¿ƒåŠŸèƒ½**:

- **ç±»å‹å®‰å…¨ CRUD**: åŸºäº Schema çš„ CRUD æ“ä½œ
- **æƒé™é›†æˆ**: ä¸ @linch-kit/auth æ·±åº¦é›†æˆ
- **æŸ¥è¯¢æ„å»º**: ç±»å‹å®‰å…¨çš„æŸ¥è¯¢ API
- **æ•°æ®éªŒè¯**: è‡ªåŠ¨æ•°æ®éªŒè¯å’Œæ¸…ç†
- **å…³ç³»å¤„ç†**: å¤æ‚å…³ç³»çš„ CRUD æ”¯æŒ

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { createCRUD } from '@linch-kit/crud'

const userCRUD = createCRUD(UserSchema)
const user = await userCRUD.create({ name: 'John', email: 'john@example.com' })
```

### L3: @linch-kit/trpc (APIå±‚)

**èŒè´£**: ç«¯åˆ°ç«¯ç±»å‹å®‰å…¨çš„ API

**æ ¸å¿ƒåŠŸèƒ½**:

- **tRPC é›†æˆ**: å®Œæ•´çš„ tRPC æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯
- **ç±»å‹å®‰å…¨**: ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥
- **ä¸­é—´ä»¶ç³»ç»Ÿ**: è®¤è¯ã€æƒé™ã€æ—¥å¿—ä¸­é—´ä»¶
- **é”™è¯¯å¤„ç†**: ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶
- **API ç”Ÿæˆ**: åŸºäº Schema è‡ªåŠ¨ç”Ÿæˆ API

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { createRouter } from '@linch-kit/trpc'

export const userRouter = createRouter().query('getUser', {
  input: z.string(),
  resolve: async ({ input, ctx }) => {
    return await ctx.db.user.findUnique({ where: { id: input } })
  },
})
```

### L3: @linch-kit/ui (UIç»„ä»¶)

**èŒè´£**: å¯å¤ç”¨çš„ UI ç»„ä»¶åº“

**æ ¸å¿ƒåŠŸèƒ½**:

- **shadcn/ui é›†æˆ**: ç°ä»£ UI ç»„ä»¶åº“
- **ä¸»é¢˜ç³»ç»Ÿ**: Tailwind CSS 4 ä¸»é¢˜æ”¯æŒ
- **è¡¨å•ç»„ä»¶**: åŸºäº Schema çš„è¡¨å•ç”Ÿæˆ
- **æ•°æ®å±•ç¤º**: è¡¨æ ¼ã€åˆ—è¡¨ç­‰æ•°æ®ç»„ä»¶
- **ä¼ä¸šç»„ä»¶**: å¤æ‚çš„ä¼ä¸šçº§ UI ç»„ä»¶

```typescript
// ä½¿ç”¨ç¤ºä¾‹
import { Button, Form, DataTable } from '@linch-kit/ui'

<Form schema={UserSchema} onSubmit={handleSubmit} />
<DataTable data={users} columns={userColumns} />
```

### L4: modules/console (ç®¡ç†å¹³å°)

**èŒè´£**: ä¼ä¸šçº§ç®¡ç†æ§åˆ¶å°

**æ ¸å¿ƒåŠŸèƒ½**:

- **å¤šç§Ÿæˆ·ç®¡ç†**: ç§Ÿæˆ·åˆ›å»ºã€é…ç½®ã€ç›‘æ§
- **ç”¨æˆ·æƒé™ç®¡ç†**: ç”¨æˆ·ã€è§’è‰²ã€æƒé™ç®¡ç†ç•Œé¢
- **ç³»ç»Ÿç›‘æ§**: ç³»ç»ŸçŠ¶æ€ã€æ€§èƒ½ç›‘æ§
- **å®¡è®¡æ—¥å¿—**: æ“ä½œæ—¥å¿—æŸ¥çœ‹å’Œåˆ†æ
- **å¯åµŒå…¥è®¾è®¡**: å¯ä»¥è¢«åº”ç”¨å±‚é›†æˆ

## ğŸ”„ æ•°æ®æµæ¶æ„

### è¯·æ±‚å¤„ç†æµç¨‹

```
ç”¨æˆ·è¯·æ±‚ â†’ Next.js Router â†’ tRPC Handler â†’ æƒé™æ£€æŸ¥ â†’ CRUD æ“ä½œ â†’ æ•°æ®åº“
                â†‘              â†‘           â†‘         â†‘          â†‘
            @linch-kit/ui  @linch-kit/trpc  @linch-kit/auth  @linch-kit/crud  @linch-kit/core
```

### Schema é©±åŠ¨æµç¨‹

```
Schema å®šä¹‰ â†’ ç±»å‹ç”Ÿæˆ â†’ API ç”Ÿæˆ â†’ è¡¨å•ç”Ÿæˆ â†’ éªŒè¯è§„åˆ™
     â†‘          â†‘         â†‘         â†‘         â†‘
@linch-kit/schema â†’ @linch-kit/trpc â†’ @linch-kit/ui â†’ è¿è¡Œæ—¶éªŒè¯
```

## ğŸ§  AI é›†æˆæ¶æ„

### Neo4j çŸ¥è¯†å›¾è°±

```
ä»£ç åº“æ‰«æ â†’ AST åˆ†æ â†’ å›¾è°±æ„å»º â†’ å…³ç³»åˆ†æ â†’ AI æŸ¥è¯¢æ¥å£
    â†‘          â†‘         â†‘         â†‘         â†‘
  æºä»£ç     è¯­æ³•æ ‘   Neo4j æ•°æ®åº“  Graph RAG  AI Session å·¥å…·
```

**å›¾è°± Schema**:

- **èŠ‚ç‚¹ç±»å‹**: Package, Function, Class, Interface, Schema
- **å…³ç³»ç±»å‹**: CALLS, EXTENDS, IMPLEMENTS, IMPORTS, DEPENDS_ON
- **æ•°æ®çŠ¶æ€**: 5,446+ èŠ‚ç‚¹ï¼Œ7,969+ å…³ç³»

### AI Session å·¥å…·é›†æˆ

```
bun run ai:session â†’ æ„å›¾è¯†åˆ« â†’ å›¾è°±æŸ¥è¯¢ â†’ ä¸Šä¸‹æ–‡ç”Ÿæˆ â†’ AI å“åº”
        â†‘              â†‘         â†‘         â†‘         â†‘
   å‘½ä»¤è¡Œæ¥å£      NLP å¤„ç†   Neo4j æŸ¥è¯¢   ç»“æ„åŒ–æ•°æ®   æ™ºèƒ½å»ºè®®
```

## ğŸ¯ æ¶æ„æ‰©å±•åŸåˆ™

### æ°´å¹³æ‰©å±• (åŒå±‚æ‰©å±•)

- **æ–°åŒ…**: åœ¨åŒä¸€å±‚çº§æ·»åŠ æ–°çš„åŒ… (å¦‚ @linch-kit/analytics)
- **æ–°æ¨¡å—**: åœ¨æ¨¡å—å±‚æ·»åŠ æ–°çš„ä¸šåŠ¡æ¨¡å—
- **æ–°åº”ç”¨**: åˆ›å»ºæ–°çš„åº”ç”¨é›†æˆç°æœ‰åŠŸèƒ½

### å‚ç›´æ‰©å±• (åŠŸèƒ½å¢å¼º)

- **åŒ…å†…æ‰©å±•**: åœ¨ç°æœ‰åŒ…å†…å¢åŠ æ–°åŠŸèƒ½
- **é…ç½®é©±åŠ¨**: é€šè¿‡é…ç½®å¯ç”¨æ–°ç‰¹æ€§
- **æ’ä»¶æœºåˆ¶**: é€šè¿‡æ’ä»¶ç³»ç»Ÿæ‰©å±•åŠŸèƒ½

### æ‰©å±•çº¦æŸ

- âœ… **éµå¾ªä¾èµ–æ–¹å‘**: æ–°åŠŸèƒ½ä¸èƒ½è¿åä¾èµ–å±‚æ¬¡
- âœ… **ä¿æŒèŒè´£è¾¹ç•Œ**: åŠŸèƒ½æ·»åŠ è¦ç¬¦åˆåŒ…çš„èŒè´£å®šä¹‰
- âœ… **å‘åå…¼å®¹**: æ–°åŠŸèƒ½ä¸èƒ½ç ´åç°æœ‰ API
- âŒ **ç¦æ­¢å¾ªç¯ä¾èµ–**: ç»ä¸å…è®¸å¼•å…¥å¾ªç¯ä¾èµ–

## ğŸ“Š æ¶æ„å¥åº·æŒ‡æ ‡

### ä»£ç è´¨é‡æŒ‡æ ‡

- **æµ‹è¯•è¦†ç›–ç‡**: core >95%, å…¶ä»– >80%
- **ç±»å‹è¦†ç›–ç‡**: 100% TypeScript ä¸¥æ ¼æ¨¡å¼
- **æ„å»ºæ—¶é—´**: å…¨é‡æ„å»º <10ç§’
- **åŒ…å¤§å°**: æ ¸å¿ƒåŒ… <50KB gzipped

### ä¾èµ–å¥åº·æŒ‡æ ‡

- **ä¾èµ–æ·±åº¦**: æœ€å¤§ä¾èµ–å±‚çº§ â‰¤4
- **å¾ªç¯ä¾èµ–**: 0ä¸ªå¾ªç¯ä¾èµ–
- **å¤–éƒ¨ä¾èµ–**: æœ€å°åŒ–ç¬¬ä¸‰æ–¹ä¾èµ–
- **å®‰å…¨æ¼æ´**: 0ä¸ªé«˜å±æ¼æ´

### æ€§èƒ½æŒ‡æ ‡

- **API å“åº”æ—¶é—´**: å¹³å‡ <200ms
- **é¦–å±åŠ è½½**: <3ç§’
- **æ„å»ºç¼“å­˜å‘½ä¸­ç‡**: >80%
- **çƒ­é‡è½½æ—¶é—´**: <1ç§’

---

**è¿™ä¸ªæ¶æ„æ˜¯ LinchKit çš„æ ¸å¿ƒåŸºç¡€ï¼Œæ‰€æœ‰å¼€å‘æ´»åŠ¨éƒ½åº”è¯¥éµå¾ªè¿™ä¸ªæ¶æ„è®¾è®¡è¿›è¡Œã€‚**
