# 主计划：Linch-Kit 框架稳定化路线图 (v1.7)

**版本**: 1.7 (Enhanced with Risk Management)
**状态**: 已批准
**负责人**: 项目架构组 (由 AI Agent 驱动)
**相关文档**: 
- [风险管理策略](./06_Risk_Management_Strategy.md)
- [任务依赖关系图](./07_Task_Dependency_Graph.md)
- [文档一致性报告](./08_Documentation_Consistency_Report.md)

---

## 1. 战略目标与定位

本文档是指导 **AI Agent** 完成 Linch-Kit 框架稳定化工作的唯一、权威的官方路线图。它定义了最终目标、开发原则和详细的实施路径。

**最终目标**: 构建一个**稳定、可靠、可扩展的核心框架**，使其成为未来所有应用和扩展开发的坚实基础。

---

## 2. AI 开发的核心原则

- **审计优先 (Audit First)**: 在对任何包或模块进行修改前，必须先执行一次彻底的自动化评估。
- **测试驱动 (Test-Driven)**: 所有核心逻辑都必须有相应的单元测试。
- **API 设计优先 (API-First)**: 任何新功能在实现前，都应先清晰地定义其 API 接口。
- **AI 友好指令 (AI-Friendly Instructions)**: 所有实施计划中的任务都被设计为清晰、原子化的指令。
- **工具链按需演进 (On-Demand Toolchain Evolution)**: `ai-platform` 的功能增强，由框架开发需求驱动。

---

## 3. 开发路径总览与实施计划

我们将分四个阶段完成框架的稳定化工作。每个阶段的具体技术实施方案，请参阅以下详细计划：

- **[第一阶段实施计划：奠定坚实基础](./implementation_plans/01_Phase_1_Foundation_First.md)**
- **[第二阶段实施计划：集成与示范](./implementation_plans/02_Phase_2_Integration_and_Showcase.md)**
- **[第三阶段实施计划：开发者体验](./implementation_plans/03_Phase_3_Developer_Experience.md)**
- **[第四阶段实施计划：固化与交付](./implementation_plans/04_Phase_4_Stabilization_and_Delivery.md)**

---

## 4. 各阶段核心目标概览

- **第一阶段**: 确保所有 `@linch-kit/*` 核心包功能完善、API 稳定、依赖清晰，并集成 i18n 功能。
- **第二阶段**: 将 `apps/starter` 打造成集成所有核心包的最佳实践范例。
- **第三阶段**: 让第三方开发者可以轻松、顺畅地为 Linch-Kit 开发新扩展。
- **第四阶段**: 确保框架的质量、稳定性和长期可维护性，达到 `1.0.0` 发布标准。

---

## 5. 最终评估：冲突、风险与缓解措施

本规划在最终确定前，经过了严格的自我评估，以确保其健全、严谨和可执行。

- **与现状的冲突**: **无**。本计划通过强制性的“审计优先”原则，主动地、建设性地解决现状与目标架构之间的偏差。技术栈 (`bun`) 和目录结构均已对齐。

- **事实与逻辑错误**: **无**。所有命令、包依赖关系和开发流程均经过复查，符合项目规范和软件工程最佳实践。

- **关键性遗漏**: **无**。计划中有意未指定具体的数据库（DB）方案，是为了保持框架的灵活性。框架的职责是提供数据适配器接口，而非强制特定的数据库技术，这是正确的架构决策。

- **潜在风险与缓解措施**:
    - **风险：AI Agent 执行偏差**。
        - **缓解**: 
          - 通过原子化指令、审计优先原则、测试驱动和人类监督来控制
          - 强制 Graph RAG 查询确保基于项目上下文
          - 每日审计机制，检查 AI 生成代码的质量
          - 自动化验证脚本，确保符合项目标准
    - **风险：范围蔓延（Scope Creep）**。
        - **缓解**: 
          - 以本主计划为唯一标准，`v1.0` 稳定前不增加核心目标外的功能
          - 严格的任务优先级管理
          - 变更控制流程，任何新需求必须评估对稳定化目标的影响
    - **风险：第三方依赖项变更**。
        - **缓解**: 
          - 通过 `bun.lockb` 锁定版本
          - 通过适配器模式隔离第三方库的影响
          - 定期依赖审计，提前识别潜在的不兼容更新
          - 关键依赖的替代方案预案
    - **风险：任务依赖关系混乱**。
        - **缓解**: 
          - 明确的任务依赖图（见附录）
          - 任务执行前的依赖检查
          - 并行任务的资源冲突检测
    - **风险：质量标准下降**。
        - **缓解**: 
          - 强制的质量门禁（测试覆盖率、构建时间等）
          - 自动化的代码质量检查
          - 定期的架构审查和重构

---

## 7. 附录

### 7.1 相关文档链接

- [Essential_Rules.md](../00_Getting_Started/03_Essential_Rules.md) - 核心开发约束
- [Development_Workflow.md](../02_Guides/01_Development_Workflow.md) - 详细开发流程
- [Package_Architecture.md](../01_Concepts/03_Package_Architecture.md) - 包架构设计
- [Strategic_Architecture_Evolution.md](../01_Concepts/07_Strategic_Architecture_Evolution.md) - 架构演进策略

### 7.2 质量标准快速参考

- **测试覆盖率**:
  - 核心包 (@linch-kit/core): 98%+
  - 关键包 (auth, schema, crud): 95%+
  - UI组件包: 90%+
  - 应用层: 85%+
- **构建时间**: < 10秒
- **包依赖顺序**: core → schema → auth → crud → trpc → ui → console

### 7.3 更新日志

- v1.7 (2025-07-17): 增加 AI 执行标准和任务模板，完善风险缓解措施
- v1.6: Final Assessed 版本
- v1.5: 完善风险评估和缓解措施
- v1.4: 增加 Graph RAG 驱动开发原则
- v1.3: 优化任务原子化要求
- v1.2: 增加防御性编程原则
- v1.1: 初始版本