#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# AI Guardian强制验证
echo "🛡️ AI Guardian pre-commit验证..."
if ! bun run ai:guardian:validate "pre-commit verification" 2>/dev/null; then
    echo "🚨 AI Guardian验证失败，提交被阻止"
    echo "💡 请确保在正确分支且遵守所有约束"
    exit 1
fi

echo "✅ AI Guardian验证通过"

# 标准的pre-commit检查
bun run lint:fix
bun run check-types