# LinchKit æ¶æ„é‡æ„å®æ–½è·¯çº¿å›¾

**ç‰ˆæœ¬**: v1.0  
**æ›´æ–°æ—¥æœŸ**: 2025-07-04  
**ç›®æ ‡**: å®ç° Starter è½»é‡åŒ– + Console å¹³å°åŒ– + æ··åˆå¼€å‘æ¨¡å¼

## ğŸ¯ æ€»ä½“ç›®æ ‡

åŸºäºä¸ Gemini çš„åå•†ç»“æœï¼Œå°† LinchKit ä»"åŠŸèƒ½å›ºå®šçš„äº§å“"è½¬å˜ä¸º"å¯æ‰©å±•çš„å¹³å°"ï¼Œå®ç°ï¼š

1. **Starter è½»é‡åŒ–**ï¼šä»é‡å‹åº”ç”¨å˜ä¸ºè½»é‡è„šæ‰‹æ¶
2. **Console å¹³å°åŒ–**ï¼šä»æ¼”ç¤ºåº”ç”¨å‡çº§ä¸ºåŸºç¡€è®¾æ–½å¹³å°
3. **æ··åˆå¼€å‘æ¨¡å¼**ï¼šæ”¯æŒ Console + è‡ªå®šä¹‰åŠŸèƒ½çš„æ¸è¿›å¼å¼€å‘
4. **å®Œæ•´åŒ…ç”Ÿæ€**ï¼šç¡®ä¿æ¯ä¸ªåŒ…éƒ½åŠŸèƒ½å®Œæ•´ä¸”å¯ç‹¬ç«‹ä½¿ç”¨

## ğŸ“… å®æ–½é˜¶æ®µè§„åˆ’

### **Phase 1: åŒ…å®Œæ•´æ€§éªŒè¯ä¸å¢å¼º**ï¼ˆ1-2å‘¨ï¼‰

#### ç›®æ ‡
ç¡®ä¿æ¯ä¸ª package éƒ½æ˜¯åŠŸèƒ½å®Œæ•´çš„ç‹¬ç«‹åº“ï¼Œå¯å•ç‹¬ä½¿ç”¨

#### å…·ä½“ä»»åŠ¡
1. **åŒ…ä¾èµ–å…³ç³»æ¢³ç†**
   - [ ] å®¡æŸ¥å½“å‰åŒ…çš„ä¾èµ–å…³ç³»ï¼Œç¡®ä¿ç¬¦åˆæ¶æ„çº¦æŸ
   - [ ] ç§»é™¤ä¸å¿…è¦çš„å¾ªç¯ä¾èµ–
   - [ ] éªŒè¯ core â†’ schema â†’ auth â†’ crud â†’ trpc â†’ ui çš„ä¾èµ–é¡ºåº

2. **API å®Œæ•´æ€§æ£€æŸ¥**
   - [ ] å®¡æ ¸ @linch-kit/core çš„é…ç½®ç®¡ç†ã€æ—¥å¿—ã€æ’ä»¶ç³»ç»Ÿ API
   - [ ] è¡¥å…… @linch-kit/auth çš„ç‹¬ç«‹è®¤è¯èƒ½åŠ›å’Œæƒé™æ£€æŸ¥ API
   - [ ] å®Œå–„ @linch-kit/crud çš„æŸ¥è¯¢æ„å»ºå™¨å’Œæ‰¹é‡æ“ä½œ
   - [ ] å¢å¼º @linch-kit/ui çš„ Schema é©±åŠ¨ç»„ä»¶

3. **ç‹¬ç«‹ä½¿ç”¨æ–‡æ¡£**
   - [ ] ä¸ºæ¯ä¸ªåŒ…ç¼–å†™ç‹¬ç«‹çš„ README å’Œä½¿ç”¨ç¤ºä¾‹
   - [ ] åˆ›å»º"ä¸ä½¿ç”¨ Console"çš„çº¯åŒ…é›†æˆç¤ºä¾‹
   - [ ] éªŒè¯æ¯ä¸ªåŒ…åœ¨ç°æœ‰é¡¹ç›®ä¸­çš„é›†æˆèƒ½åŠ›

#### éªŒæ”¶æ ‡å‡†
- æ¯ä¸ªåŒ…éƒ½å¯ä»¥ç‹¬ç«‹å®‰è£…å’Œä½¿ç”¨
- å®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
- ç‹¬ç«‹çš„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 
- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%ï¼ˆcore > 90%ï¼‰

### **Phase 2: Console å¹³å°åŒ–é‡æ„**ï¼ˆ2-3å‘¨ï¼‰

#### ç›®æ ‡
å°† Console é‡æ„ä¸ºçº¯é›†æˆå™¨å’Œå¹³å°åŸºç¡€è®¾æ–½

#### å…·ä½“ä»»åŠ¡
1. **Console æ ¸å¿ƒæ¶æ„é‡æ„**
   - [ ] åˆ›å»º `LinchKitConsole` ä¸»ç»„ä»¶
   - [ ] å®ç°é…ç½®é©±åŠ¨çš„åŠŸèƒ½å¯ç”¨æœºåˆ¶
   - [ ] å»ºç«‹ç»Ÿä¸€çš„ Context å’Œ Provider ç³»ç»Ÿ
   - [ ] å®ç°åŠ¨æ€è·¯ç”±æ³¨å†Œæœºåˆ¶

2. **ç§»é™¤ä¸šåŠ¡é€»è¾‘å®ç°**
   - [ ] å°†æ‰€æœ‰ç”¨æˆ·ç®¡ç†é€»è¾‘ç§»åˆ° @linch-kit/crud + @linch-kit/ui
   - [ ] å°†è®¤è¯é€»è¾‘å®Œå…¨å§”æ‰˜ç»™ @linch-kit/auth
   - [ ] ç¡®ä¿ Console åªåšé›†æˆï¼Œä¸åšå®ç°

3. **å…±äº«æœåŠ¡è®¾è®¡**
   - [ ] å®ç° `useLinchKit()`, `useCurrentUser()` ç­‰æ ¸å¿ƒ Hooks
   - [ ] å»ºç«‹ç»Ÿä¸€çš„ä¸»é¢˜ã€æƒé™ã€å¯¼èˆªç³»ç»Ÿ
   - [ ] åˆ›å»ºç»„ä»¶è¦†ç›–å’Œæ‰©å±•æœºåˆ¶

#### æŠ€æœ¯è¦ç‚¹
```typescript
// Console ä¸»å…¥å£è®¾è®¡
export const LinchKitConsole: React.FC<{
  config: LinchKitConfig
}> = ({ config }) => {
  return (
    <LinchKitProvider config={config}>
      <ConsoleShell>
        <DynamicRouter routes={config.routes} />
      </ConsoleShell>
    </LinchKitProvider>
  )
}
```

#### éªŒæ”¶æ ‡å‡†
- Console å®Œå…¨åŸºäº packages æ„å»º
- æ”¯æŒåŠŸèƒ½æ¨¡å—çš„å¯ç”¨/ç¦ç”¨
- æä¾›æ¸…æ™°çš„æ‰©å±• API
- ç»Ÿä¸€çš„å¯¼èˆªã€æƒé™ã€ä¸»é¢˜ç³»ç»Ÿ

### **Phase 3: Starter ç²¾ç®€ä¸é…ç½®ç³»ç»Ÿ**ï¼ˆ1å‘¨ï¼‰

#### ç›®æ ‡
å°† Starter ç²¾ç®€ä¸ºæœ€å°åŒ–çš„åº”ç”¨å¯åŠ¨å™¨

#### å…·ä½“ä»»åŠ¡
1. **ä¾èµ–ç²¾ç®€**
   - [ ] ç§»é™¤æ‰€æœ‰ UI ç»„ä»¶ä¾èµ–ï¼ˆshadcn/ui ç›¸å…³ï¼‰
   - [ ] ç§»é™¤ç›´æ¥ä¸šåŠ¡é€»è¾‘åŒ…ï¼ˆauth, crud, trpc, uiï¼‰
   - [ ] ä¿ç•™æœ€å°è¿è¡Œæ—¶ä¾èµ–ï¼šcore, console, next, react

2. **é…ç½®æ–‡ä»¶ç³»ç»Ÿ**
   - [ ] è®¾è®¡ `LinchKitConfig` æ¥å£
   - [ ] å®ç°é…ç½®æ–‡ä»¶è§£æå’ŒéªŒè¯
   - [ ] æ”¯æŒç¯å¢ƒå˜é‡æ³¨å…¥å’Œé»˜è®¤å€¼

3. **å¤šæ¨¡å¼æ”¯æŒ**
   - [ ] å®ç° `console` æ¨¡å¼ï¼ˆçº¯ Consoleï¼‰
   - [ ] å®ç° `hybrid` æ¨¡å¼ï¼ˆConsole + è‡ªå®šä¹‰ï¼‰
   - [ ] å®ç° `packages-only` æ¨¡å¼ï¼ˆçº¯åŒ…é›†æˆï¼‰

#### æ–‡ä»¶ç»“æ„ç›®æ ‡
```
apps/starter/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx              # å…¨å±€å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx               # å…¥å£é¡µé¢
â”‚   â””â”€â”€ dashboard/
â”‚       â””â”€â”€ [[...slug]]/
â”‚           â””â”€â”€ page.tsx       # åŠ¨æ€æŒ‚è½½ç‚¹
â”œâ”€â”€ src/
â”‚   â””â”€â”€ extensions/            # ç”¨æˆ·è‡ªå®šä¹‰ä»£ç åŒºåŸŸ
â”œâ”€â”€ linchkit.config.ts         # æ ¸å¿ƒé…ç½®æ–‡ä»¶
â”œâ”€â”€ package.json              # æœ€å°ä¾èµ–
â””â”€â”€ .env.example              # ç¯å¢ƒå˜é‡æ¨¡æ¿
```

#### éªŒæ”¶æ ‡å‡†
- åŒ…ä½“ç§¯å‡å°‘ 80% ä»¥ä¸Š
- æ”¯æŒä¸‰ç§ä½¿ç”¨æ¨¡å¼
- é…ç½®æ–‡ä»¶é©±åŠ¨çš„åŠŸèƒ½æ§åˆ¶
- æ¸…æ™°çš„è‡ªå®šä¹‰ä»£ç ç»„ç»‡ç»“æ„

### **Phase 4: æ··åˆå¼€å‘æ¨¡å¼å®ç°**ï¼ˆ2å‘¨ï¼‰

#### ç›®æ ‡
å®ç° Console + è‡ªå®šä¹‰åŠŸèƒ½çš„æ··åˆå¼€å‘æ¨¡å¼

#### å…·ä½“ä»»åŠ¡
1. **åŠ¨æ€è·¯ç”±ç³»ç»Ÿ**
   - [ ] å®ç°è‡ªå®šä¹‰è·¯ç”±æ³¨å†Œæœºåˆ¶
   - [ ] æ”¯æŒè·¯ç”±çº§æƒé™æ§åˆ¶
   - [ ] å®ç°ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½

2. **å¯¼èˆªé›†æˆ**
   - [ ] è‡ªå®šä¹‰å¯¼èˆªé¡¹é›†æˆåˆ° Console å¯¼èˆª
   - [ ] æ”¯æŒå›¾æ ‡ã€æƒé™ã€åˆ†ç»„ç­‰é…ç½®
   - [ ] å®ç°å¯¼èˆªçš„åŠ¨æ€æ˜¾ç¤º/éšè—

3. **å¼€å‘è€…ä½“éªŒä¼˜åŒ–**
   - [ ] åˆ›å»º CLI å·¥å…·æ”¯æŒè·¯ç”±å’Œå¯¼èˆªçš„å¿«é€Ÿæ·»åŠ 
   - [ ] æä¾›å®˜æ–¹çš„ hybrid æ¨¡å¼æ¨¡æ¿
   - [ ] ç¼–å†™è¯¦ç»†çš„æ··åˆå¼€å‘æŒ‡å—

#### é…ç½®ç¤ºä¾‹
```typescript
const hybridConfig: LinchKitConfig = {
  mode: 'hybrid',
  console: {
    features: ['user-management', 'tenant-management']
  },
  hybrid: {
    customRoutes: [
      {
        path: '/inventory',
        component: './src/extensions/inventory/InventoryPage',
        name: 'åº“å­˜ç®¡ç†',
        permissions: ['inventory:read']
      }
    ],
    customNavigation: [
      {
        label: 'åº“å­˜ç®¡ç†',
        path: '/inventory',
        icon: 'Package',
        permissions: ['inventory:read']
      }
    ]
  }
}
```

#### éªŒæ”¶æ ‡å‡†
- è‡ªå®šä¹‰è·¯ç”±æ— ç¼é›†æˆåˆ° Console
- ç»Ÿä¸€çš„æƒé™å’Œä¸»é¢˜ç³»ç»Ÿ
- è‰¯å¥½çš„ä»£ç åˆ†å‰²å’Œæ€§èƒ½
- å®Œæ•´çš„å¼€å‘å·¥å…·æ”¯æŒ

### **Phase 5: æ’ä»¶ç³»ç»Ÿä¸ç”Ÿæ€å»ºè®¾**ï¼ˆ2-3å‘¨ï¼‰

#### ç›®æ ‡
å»ºç«‹å®Œæ•´çš„æ’ä»¶ç”Ÿæ€ç³»ç»Ÿ

#### å…·ä½“ä»»åŠ¡
1. **æ’ä»¶ç³»ç»Ÿæ ¸å¿ƒ**
   - [ ] åœ¨ @linch-kit/core ä¸­å®ç°æ’ä»¶ç®¡ç†å™¨
   - [ ] å®šä¹‰ `LinchKitPlugin` æ¥å£è§„èŒƒ
   - [ ] å®ç°æ’ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†

2. **å®˜æ–¹æ’ä»¶å¼€å‘**
   - [ ] @linch-kit/plugin-user-management
   - [ ] @linch-kit/plugin-tenant-management
   - [ ] @linch-kit/plugin-analytics
   - [ ] @linch-kit/plugin-monitoring

3. **æ’ä»¶å¼€å‘å·¥å…·**
   - [ ] åˆ›å»ºæ’ä»¶å¼€å‘æ¨¡æ¿
   - [ ] ç¼–å†™æ’ä»¶å¼€å‘æŒ‡å—
   - [ ] å®ç°æ’ä»¶çƒ­é‡è½½å¼€å‘æ¨¡å¼

#### æ’ä»¶æ¥å£è®¾è®¡
```typescript
export interface LinchKitPlugin {
  name: string
  version: string
  components?: Record<string, React.ComponentType>
  routes?: Array<RouteConfig>
  services?: Record<string, ServiceExtension>
  hooks?: LifecycleHooks
  config?: {
    schema: z.ZodSchema
    defaults: Record<string, any>
  }
}
```

#### éªŒæ”¶æ ‡å‡†
- å®Œæ•´çš„æ’ä»¶ç³»ç»Ÿæ¶æ„
- è‡³å°‘ 4 ä¸ªå®˜æ–¹æ’ä»¶
- æ’ä»¶å¼€å‘å·¥å…·å’Œæ–‡æ¡£
- ç¬¬ä¸‰æ–¹æ’ä»¶å¼€å‘ç¤ºä¾‹

### **Phase 6: æ–‡æ¡£ã€æµ‹è¯•ä¸ä¼˜åŒ–**ï¼ˆ1-2å‘¨ï¼‰

#### ç›®æ ‡
å®Œå–„æ–‡æ¡£ã€æµ‹è¯•è¦†ç›–ç‡å’Œæ€§èƒ½ä¼˜åŒ–

#### å…·ä½“ä»»åŠ¡
1. **æ–‡æ¡£ä½“ç³»å®Œå–„**
   - [ ] æ›´æ–°æ¶æ„è®¾è®¡æ–‡æ¡£
   - [ ] ç¼–å†™ä¸‰ç§ä½¿ç”¨æ¨¡å¼çš„å®Œæ•´æŒ‡å—
   - [ ] åˆ›å»ºæœ€ä½³å®è·µå’Œè¿ç§»æŒ‡å—
   - [ ] å»ºç«‹æ’ä»¶å¼€å‘è€…æ–‡æ¡£

2. **æµ‹è¯•è¦†ç›–ç‡æå‡**
   - [ ] æ ¸å¿ƒåŒ…å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 90%
   - [ ] Console é›†æˆæµ‹è¯•è¦†ç›–ç‡ > 80%
   - [ ] E2E æµ‹è¯•è¦†ç›–ä¸»è¦ä½¿ç”¨åœºæ™¯

3. **æ€§èƒ½ä¼˜åŒ–**
   - [ ] ä»£ç åˆ†å‰²ä¼˜åŒ–
   - [ ] æ„å»ºæ—¶é—´ä¼˜åŒ–ï¼ˆ< 10ç§’ï¼‰
   - [ ] è¿è¡Œæ—¶æ€§èƒ½ç›‘æ§

#### éªŒæ”¶æ ‡å‡†
- å®Œæ•´çš„æ–‡æ¡£ä½“ç³»
- é«˜æµ‹è¯•è¦†ç›–ç‡
- ä¼˜ç§€çš„æ€§èƒ½æŒ‡æ ‡
- ç”¨æˆ·åé¦ˆéªŒè¯

## ğŸ› ï¸ å¼€å‘è§„èŒƒ

### **åˆ†æ”¯ç­–ç•¥**
- ä¸»åˆ†æ”¯ï¼š`main`
- åŠŸèƒ½åˆ†æ”¯ï¼š`feature/phase-{n}-{description}`
- å‘å¸ƒåˆ†æ”¯ï¼š`release/v{version}`

### **æäº¤è§„èŒƒ**
```bash
feat(core): å®ç°æ’ä»¶ç®¡ç†å™¨æ ¸å¿ƒåŠŸèƒ½
refactor(console): é‡æ„ Console ä¸ºçº¯é›†æˆå™¨æ¶æ„
docs(architecture): æ›´æ–°æ¶æ„è®¾è®¡æ–‡æ¡£
test(crud): å¢åŠ  CRUD æ“ä½œçš„å•å…ƒæµ‹è¯•
```

### **ä»£ç å®¡æŸ¥**
- æ¯ä¸ª Phase ç»“æŸå‰è¿›è¡Œæ¶æ„å®¡æŸ¥
- å…³é”®ç»„ä»¶éœ€è¦ 2 äººä»¥ä¸Šå®¡æŸ¥
- æ€§èƒ½æ•æ„Ÿä»£ç éœ€è¦æ€§èƒ½æµ‹è¯•

### **è´¨é‡æ ‡å‡†**
- TypeScript ä¸¥æ ¼æ¨¡å¼ï¼Œç¦ç”¨ `any`
- ESLint è§„åˆ™ä¸¥æ ¼æ‰§è¡Œ
- æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡
- æ–‡æ¡£ä¸ä»£ç åŒæ­¥æ›´æ–°

## ğŸ“‹ é£é™©ç®¡æ§

### **æŠ€æœ¯é£é™©**
1. **ä¾èµ–å†²çªé£é™©**
   - ç¼“è§£æªæ–½ï¼šä½¿ç”¨ peer dependencies å’Œç‰ˆæœ¬é”å®š
   - åº”æ€¥æ–¹æ¡ˆï¼šæä¾›ä¾èµ–å…¼å®¹æ€§æŒ‡å—

2. **æ€§èƒ½é£é™©**
   - ç¼“è§£æªæ–½ï¼šä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½
   - ç›‘æ§æ–¹æ¡ˆï¼šæ€§èƒ½åŸºå‡†æµ‹è¯•å’ŒæŒç»­ç›‘æ§

3. **å…¼å®¹æ€§é£é™©**
   - ç¼“è§£æªæ–½ï¼šå‘åå…¼å®¹æ€§æµ‹è¯•
   - è¿ç§»æ–¹æ¡ˆï¼šæä¾›è‡ªåŠ¨åŒ–è¿ç§»å·¥å…·

### **ä¸šåŠ¡é£é™©**
1. **ç”¨æˆ·å­¦ä¹ æˆæœ¬**
   - ç¼“è§£æªæ–½ï¼šè¯¦ç»†æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç 
   - æ”¯æŒæ–¹æ¡ˆï¼šç¤¾åŒºæ”¯æŒå’Œé—®é¢˜åé¦ˆæ¸ é“

2. **ç”Ÿæ€å»ºè®¾é£é™©**
   - ç¼“è§£æªæ–½ï¼šå®˜æ–¹æ’ä»¶å…ˆè¡Œï¼Œå»ºç«‹æ ‡å‡†
   - æ¨å¹¿æ–¹æ¡ˆï¼šå¼€å‘è€…ç¤¾åŒºå»ºè®¾

## ğŸ¯ æˆåŠŸæŒ‡æ ‡

### **æŠ€æœ¯æŒ‡æ ‡**
- [ ] æ‰€æœ‰åŒ…å¯ç‹¬ç«‹ä½¿ç”¨ï¼Œæ–‡æ¡£å®Œæ•´
- [ ] Starter åŒ…ä½“ç§¯å‡å°‘ 80%
- [ ] Console å®Œå…¨åŸºäº packages æ„å»º
- [ ] æ”¯æŒä¸‰ç§ä½¿ç”¨æ¨¡å¼ï¼Œé…ç½®é©±åŠ¨
- [ ] æ’ä»¶ç³»ç»Ÿå®Œæ•´å¯ç”¨

### **ç”¨æˆ·ä½“éªŒæŒ‡æ ‡**
- [ ] ä»é›¶åˆ°è¿è¡Œ < 5 åˆ†é’Ÿï¼ˆconsole æ¨¡å¼ï¼‰
- [ ] æ·»åŠ è‡ªå®šä¹‰åŠŸèƒ½ < 30 åˆ†é’Ÿï¼ˆhybrid æ¨¡å¼ï¼‰
- [ ] ç°æœ‰é¡¹ç›®é›†æˆ < 2 å°æ—¶ï¼ˆpackages-only æ¨¡å¼ï¼‰

### **ç”Ÿæ€æŒ‡æ ‡**
- [ ] è‡³å°‘ 4 ä¸ªå®˜æ–¹æ’ä»¶
- [ ] æ’ä»¶å¼€å‘æ–‡æ¡£å®Œæ•´
- [ ] ç¤¾åŒºåé¦ˆç§¯æ

è¿™ä¸ªè·¯çº¿å›¾ç¡®ä¿äº†æ¶æ„é‡æ„çš„ç³»ç»Ÿæ€§å’Œå¯æ‰§è¡Œæ€§ï¼Œä¸º LinchKit å‘ä¼ä¸šçº§å¹³å°çš„è½¬å‹æä¾›äº†æ¸…æ™°çš„å®æ–½è·¯å¾„ã€‚